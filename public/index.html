<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nutriway ‚Äî Admin & FastDiet Edition</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- FontAwesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700;800&family=Roboto:wght=400;700&family=Open+Sans&family=Oswald&family=Pacifico&family=Lobster&family=Amatic+SC&family=Merriweather&family=Comfortaa&display=swap" rel="stylesheet">
    <!-- –î–æ–¥–∞—Ç–∫–æ–≤—ñ —à—Ä–∏—Ñ—Ç–∏ –∑ –¥—Ä—É–≥–æ–≥–æ —Ñ–∞–π–ª—É -->
    <link href="https://fonts.googleapis.com/css2?family=Play&family=Inter&family=Poppins&family=Lato&family=Nunito&family=Raleway&family=Ubuntu&family=DM+Sans&family=Manrope&family=Bebas+Neue&family=Anton&family=Playfair+Display&family=Cinzel&family=Dancing+Script&family=Great+Vibes&family=Indie+Flower&family=JetBrains+Mono&family=Fira+Code&display=swap" rel="stylesheet">

    <style>
        /* --- 1. –ì–õ–û–ë–ê–õ–¨–ù–Ü –ó–ú–Ü–ù–ù–Ü (–î–ª—è –ê–¥–º—ñ–Ω–∫–∏) --- */
        :root {
            --primary: #10b981; /* Tailwind emerald-500 */
            --secondary: #3b82f6; /* Tailwind blue-500 */
            --site-color-top: #059669;
            --site-color-bot: #2563eb;
            --site-gradient-angle: 135deg;
            --site-gradient: linear-gradient(var(--site-gradient-angle), var(--site-color-top) 0%, var(--site-color-bot) 100%);
        }

        body {
            font-family: 'Montserrat', sans-serif;
            scroll-behavior: smooth;
            overflow-x: hidden;
            background-color: #f9fafb; /* Fallback */
        }

        /* –ö–ª–∞—Å –¥–ª—è –≥—Ä–∞–¥—ñ—î–Ω—Ç—ñ–≤, —è–∫–∏–π –∫–µ—Ä—É—î—Ç—å—Å—è –∞–¥–º—ñ–Ω–∫–æ—é */
        .hero-gradient-bg {
            background: var(--site-gradient) !important;
        }

        /* --- 2. –°–¢–ò–õ–Ü NUTRIWAY (Original) --- */
        #mobile-menu {
            transition: transform 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            transform: translateX(100%);
            box-shadow: -10px 0 30px rgba(0,0,0,0.1);
        }
        #mobile-menu.active { transform: translateX(0); }

        .menu-item { opacity: 0; transform: translateX(30px); transition: all 0.5s ease; }
        #mobile-menu.active .menu-item { opacity: 1; transform: translateX(0); }
        .delay-1 { transition-delay: 0.1s; }
        .delay-2 { transition-delay: 0.2s; }
        .delay-3 { transition-delay: 0.3s; }
        .delay-4 { transition-delay: 0.4s; }

        #menu-overlay {
            display: none; background: rgba(0,0,0,0.4); backdrop-filter: blur(4px);
            position: fixed; inset: 0; z-index: 40;
        }
        #menu-overlay.active { display: block; }

        .page-content { display: none; animation: fadeIn 0.4s ease-out; }
        .page-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.98); } to { opacity: 1; transform: scale(1); } }

        .info-card { transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .info-card:hover { transform: translateY(-10px); box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1); }

        .faq-item { cursor: pointer; transition: all 0.3s ease; }
        .faq-answer { max-height: 0; overflow: hidden; transition: max-height 0.4s ease-out, padding 0.3s ease; }
        .faq-item.active .faq-answer { max-height: 500px; padding-top: 1rem; }
        .faq-item.active i { transform: rotate(180deg); }
        .faq-item.active { border-color: #10b981; background-color: #f9fafb; }

        /* --- 3. –°–¢–ò–õ–Ü –ê–î–ú–Ü–ù–ö–ò –¢–ê –ï–õ–ï–ú–ï–ù–¢–Ü–í (Ported) --- */
        /* –ü–ª–∞–≤–∞—é—á—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ */
        .movable-box {
            position: absolute; display: inline-block; cursor: grab;
            border: 1px dashed transparent; min-width: 50px; min-height: 50px; z-index: 100;
        }
        .movable-box.selected-element, .card.selected-element, .selected-element, .selected-text {
            outline: 2px dashed #ffeb3b !important; outline-offset: 2px; z-index: 500;
        }
        .movable-content { width: 100%; height: 100%; overflow: hidden; }
        .resize-handle {
            width: 15px; height: 15px; background: white; border: 2px solid var(--primary);
            position: absolute; right: -7px; bottom: -7px; cursor: se-resize;
            display: none; z-index: 501;
        }
        .movable-box.selected-element .resize-handle { display: block; }

        /* –ê–¥–º—ñ–Ω –ü–∞–Ω–µ–ª—å */
        #admin-panel {
            position: fixed; top: 0; right: -360px;
            width: 340px; height: 100vh;
            background: rgba(44, 62, 80, 0.98); 
            color: #ecf0f1; padding: 20px; 
            box-shadow: -5px 0 20px rgba(0,0,0,0.5);
            z-index: 9999; transition: right 0.4s ease;
            overflow-y: auto; font-family: 'Roboto', sans-serif;
        }
        #admin-panel.active { right: 0; }
        
        .admin-row { display: flex; gap: 10px; margin-bottom: 15px; }
        .btn-history { flex: 1; text-align: center; font-size: 1.2em; padding: 8px; background: #e67e22; border: none; border-radius: 5px; cursor: pointer; color: white; }
        .btn-tool { 
            background: #34495e; color: white; border: 1px solid #5d6d7e; 
            cursor: pointer; padding: 10px; margin-top: 5px; width: 100%; 
            text-align: left; border-radius: 5px; transition: 0.2s;
        }
        .btn-tool:hover { background: #415b76; transform: translateX(5px); }
        .admin-label { color: #bdc3c7; font-size: 0.8em; text-transform: uppercase; margin-top: 15px; display: block; }
        
        #admin-panel input[type="color"], #admin-panel input[type="number"], #admin-panel select, #admin-panel input[type="text"] {
            width: 100%; height: 35px; margin-top: 5px; border-radius: 4px; border: none; padding: 0 10px; color: #333;
        }

        #style-controls { opacity: 0.3; pointer-events: none; margin-top: 20px; border-top: 1px solid #555; padding-top: 10px;}
        #style-controls.active { opacity: 1; pointer-events: auto; }
        
        /* –°–ø–µ—Ü–∏—Ñ—ñ—á–Ω—ñ –ø–∞–Ω–µ–ª—ñ —Å—Ç–∏–ª—ñ–≤ (–ø—Ä–∏—Ö–æ–≤–∞–Ω—ñ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º) */
        #card-style-controls, #hero-style-controls { display: none; margin-top: 15px; padding-top: 15px; border-top: 1px solid #444; }
        
        /* --- –î–û–î–ê–ù–Ü –°–¢–ò–õ–Ü –î–õ–Ø –ö–ê–†–¢–û–ö –¢–ê –ë–ê–ù–ï–†–Ü–í (–ó –¥—Ä—É–≥–æ–≥–æ —Ñ–∞–π–ª—É) --- */
        .card {
            --card-color-top: #667eea;
            --card-color-bot: #764ba2;
            background: linear-gradient(135deg, var(--card-color-top) 0%, var(--card-color-bot) 100%);
            width: 100%;
            max-width: 320px; 
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            overflow: hidden;
            color: white;
            transition: transform 0.3s ease;
            text-align: center;
            padding-bottom: 20px;
            margin: 10px; /* –î–æ–¥–∞–Ω–æ –≤—ñ–¥—Å—Ç—É–ø –¥–ª—è —Å—ñ—Ç–∫–∏ */
        }
        .card:hover { transform: translateY(-5px); }
        .card-image {
            width: 100%; height: 200px; object-fit: cover;
            background-color: #ddd; pointer-events: none; 
        }
        .card-content h2 { margin: 15px 0 5px; font-size: 1.5em; }
        .card-content p { padding: 0 15px; opacity: 0.9; font-size: 0.95em; }

        /* HERO BANNER STYLE */
        .hero-banner-style {
            --hero-bg-top: #42a5f5;
            --hero-bg-bot: #26a69a;
            background: linear-gradient(90deg, var(--hero-bg-top), var(--hero-bg-bot));
            width: 100%; height: 100%;
            border-radius: 20px;
            position: relative;
            display: flex; flex-direction: column; 
            justify-content: center; align-items: center;
            color: white; text-align: center;
            box-shadow: inset 0 0 0 1px rgba(255,255,255,0.2), 0 5px 15px rgba(0,0,0,0.1); 
            padding: 20px;
            overflow: hidden;
            z-index: 20; /* –©–æ–± –±–∞–Ω–µ—Ä –±—É–≤ –Ω–∞ –ø–µ—Ä–µ–¥–Ω—å–æ–º—É –ø–ª–∞–Ω—ñ */
        }
        .hero-banner-img {
            width: 100%; max-height: 150px; object-fit: cover; 
            border-radius: 10px; margin-bottom: 15px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        .hero-banner-style h2, .hero-banner-style p {
            position: relative; z-index: 2; text-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .hero-banner-style::after {
            content: ''; position: absolute;
            top: 10px; left: 10px; right: 10px; bottom: 10px;
            border: 1px solid rgba(255,255,255,0.4); border-radius: 15px; pointer-events: none;
            z-index: 1;
        }

        /* --- 4. –°–¢–ò–õ–Ü –î–õ–Ø –ö–ê–†–¢–û–ö –í–Ü–¢–ê–ú–Ü–ù–Ü–í (–Ø–∫ —É Nutriway) --- */
        .vit-item {
            display: flex; align-items: center; padding: 1rem;
            background-color: #f9fafb; border-radius: 1rem; border: 1px solid #f3f4f6;
            gap: 1rem; transition: transform 0.2s;
        }
        .vit-item:hover { transform: translateY(-2px); box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05); }
        .vit-icon-box { font-size: 1.5rem; width: 3rem; text-align: center; }

    </style>
</head>
<body class="bg-gray-50 text-gray-800 flex flex-col min-h-screen">

    <!-- –ù–∞–≤—ñ–≥–∞—Ü—ñ—è -->
    <nav class="fixed top-0 left-0 right-0 z-[60] bg-white/90 backdrop-blur-md border-b border-gray-100">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-2 cursor-pointer" onclick="showPage('home')">
                <i class="fas fa-route text-green-500 text-2xl"></i>
                <span class="text-xl font-bold tracking-tight text-gray-900">Nutri<span class="text-green-500">way</span></span>
            </div>
            
            <button onclick="toggleMenu()" class="p-2 focus:outline-none text-gray-900 hover:text-green-500 transition">
                <i id="menu-icon" class="fas fa-bars text-2xl"></i>
            </button>
        </div>
    </nav>

    <!-- Overlay -->
    <div id="menu-overlay" onclick="toggleMenu()"></div>

    <!-- –ë—É—Ä–≥–µ—Ä –ú–µ–Ω—é -->
    <div id="mobile-menu" class="fixed top-0 right-0 h-full z-50 bg-white w-full sm:w-1/2 lg:w-1/4 flex flex-col p-8 pt-24">
        <div class="flex flex-col space-y-6 text-lg font-semibold">
            <a href="javascript:void(0)" onclick="showPage('home'); toggleMenu();" class="menu-item delay-1 hover:text-green-500 flex items-center space-x-4">
                <i class="fas fa-home w-6"></i> <span>–ì–æ–ª–æ–≤–Ω–∞</span>
            </a>
            <a href="javascript:void(0)" onclick="showPage('calculator'); toggleMenu();" class="menu-item delay-2 hover:text-green-500 flex items-center space-x-4">
                <i class="fas fa-calculator w-6"></i> <span>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä+</span>
            </a>
            <a href="javascript:void(0)" onclick="openAdminAuth(); toggleMenu();" class="menu-item delay-3 hover:text-red-500 flex items-center space-x-4 border-t pt-4 mt-4">
                <i class="fas fa-cogs w-6"></i> <span>–ê–¥–º—ñ–Ω –ü–∞–Ω–µ–ª—å</span>
            </a>
        </div>
    </div>

    <!-- MAIN CONTENT AREA -->
    <div id="content-area">

        <!-- –ì–û–õ–û–í–ù–ê –°–¢–û–†–Ü–ù–ö–ê (Design: Nutriway) -->
        <main id="home-page" class="page-content active pt-16">
            <!-- Hero Section -->
            <header class="hero-gradient-bg text-white py-24 px-4 text-center relative overflow-hidden">
                <div class="container mx-auto relative z-10">
                    <h1 class="text-4xl md:text-6xl font-black mb-6 editable-text">Nutriway</h1>
                    <p class="text-lg opacity-90 mb-10 max-w-2xl mx-auto italic editable-text">–í–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∏–π —à–ª—è—Ö –¥–æ –∑–¥–æ—Ä–æ–≤'—è —Ç–∞ —ñ–¥–µ–∞–ª—å–Ω–æ—ó —Ñ–æ—Ä–º–∏.</p>
                    <div class="flex justify-center gap-4">
                        <button onclick="showPage('calculator')" class="bg-white text-blue-600 px-8 py-3 rounded-full font-bold hover:shadow-xl transition">–ü–æ—á–∞—Ç–∏ —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫</button>                    </div>
                </div>
            </header>

            <!-- –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ -->
            <section class="py-20 container mx-auto px-4">
                <h2 class="text-3xl font-bold mb-12 text-center editable-text">–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</h2>
                <div id="diag-grid" class="grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-24 text-center">
                    <div class="p-6 bg-white rounded-3xl shadow-md border border-gray-100 info-card">
                        <i class="fas fa-heartbeat text-red-500 text-3xl mb-4"></i>
                        <h3 class="font-bold mb-2 editable-text">–Ü–ú–¢</h3>
                        <p class="text-sm text-gray-500 editable-text">–û—Ü—ñ–Ω–∫–∞ –º–∞—Å–∏ —Ç—ñ–ª–∞.</p>
                    </div>
                    <div class="p-6 bg-white rounded-3xl shadow-md border border-gray-100 info-card">
                        <i class="fas fa-fire text-orange-500 text-3xl mb-4"></i>
                        <h3 class="font-bold mb-2 editable-text">–ö–∞–ª–æ—Ä—ñ—ó</h3>
                        <p class="text-sm text-gray-500 editable-text">–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –Ω–æ—Ä–º–∏.</p>
                    </div>
                    <div class="p-6 bg-white rounded-3xl shadow-md border border-gray-100 info-card">
                        <i class="fas fa-pills text-purple-500 text-3xl mb-4"></i>
                        <h3 class="font-bold mb-2 editable-text">–í—ñ—Ç–∞–º—ñ–Ω–∏</h3>
                        <p class="text-sm text-gray-500 editable-text">–ü—ñ–¥–±—ñ—Ä –Ω—É—Ç—Ä—ñ—î–Ω—Ç—ñ–≤.</p>
                    </div>
                    <div class="p-6 bg-white rounded-3xl shadow-md border border-gray-100 info-card">
                        <i class="fas fa-bed text-blue-500 text-3xl mb-4"></i>
                        <h3 class="font-bold mb-2 editable-text">–°–æ–Ω</h3>
                        <p class="text-sm text-gray-500 editable-text">–ù–æ—Ä–º–∏ –≤—ñ–¥–ø–æ—á–∏–Ω–∫—É.</p>
                    </div>
                </div>

                <!-- –°–í–Ü–¢ NUTRIWAY -->
                <div class="space-y-24">
                    <div class="max-w-4xl mx-auto text-center">
                        <h2 class="text-4xl font-black text-gray-900 mb-4 editable-text">–°–≤—ñ—Ç Nutriway</h2>
                        <p class="text-gray-500 text-lg editable-text">–ì–ª–∏–±–æ–∫–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è –≤–∞—à–æ–≥–æ —Ç—ñ–ª–∞.</p>
                    </div>

                    <div class="grid lg:grid-cols-2 gap-8 items-stretch">
                        <div class="info-card bg-white p-8 md:p-12 rounded-[3rem] border border-gray-100 shadow-sm flex flex-col md:flex-row gap-8 items-center">
                            <div class="w-24 h-24 bg-green-100 rounded-3xl flex items-center justify-center shrink-0">
                                <i class="fas fa-seedling text-green-600 text-4xl"></i>
                            </div>
                            <div>
                                <h3 class="text-2xl font-bold mb-3 editable-text">–ù—É—Ç—Ä–∏—Ü—ñ–æ–ª–æ–≥—ñ—è</h3>
                                <p class="text-gray-600 leading-relaxed text-sm editable-text">–ú–∏ –≤–∏–≤—á–∞—î–º–æ, —è–∫ –∫–æ–∂–µ–Ω –Ω—É—Ç—Ä—ñ—î–Ω—Ç –≤–ø–ª–∏–≤–∞—î –Ω–∞ –µ–Ω–µ—Ä–≥—ñ—é.</p>
                            </div>
                        </div>

                        <div class="info-card bg-gray-900 p-8 md:p-12 rounded-[3rem] text-white shadow-xl flex flex-col md:flex-row gap-8 items-center">
                            <div class="w-24 h-24 bg-white/10 rounded-3xl flex items-center justify-center shrink-0">
                                <i class="fas fa-utensils text-green-400 text-4xl"></i>
                            </div>
                            <div>
                                <h3 class="text-2xl font-bold mb-3 editable-text">–†–æ–∑—É–º–Ω–∞ –î—ñ—î—Ç–∞</h3>
                                <p class="text-gray-300 leading-relaxed text-sm editable-text">–ü—Ä–∞–≤–∏–ª–æ 80/20: 80% –∫–æ—Ä–∏—Å–Ω–æ—ó —ó–∂—ñ —Ç–∞ 20% –¥–ª—è –¥—É—à—ñ.</p>
                            </div>
                        </div>
                    </div>

                     <!-- –¢–∞—Ä—ñ–ª–∫–∞ –∑–¥–æ—Ä–æ–≤'—è -->
                    <div class="info-card bg-blue-50 p-8 md:p-12 rounded-[3rem] border border-blue-100 shadow-sm flex flex-col md:flex-row gap-12 items-center">
                        <div class="relative w-48 h-48 shrink-0">
                            <div class="w-full h-full border-8 border-gray-200 rounded-full flex items-center justify-center bg-white">
                                <i class="fas fa-circle-notch text-blue-500 text-4xl animate-spin-slow"></i>
                            </div>
                            <div class="absolute top-0 left-0 w-full h-full flex items-center justify-center flex-col text-center">
                                <span class="text-2xl font-black text-blue-900 italic">50%</span>
                                <span class="text-[10px] font-bold text-blue-400 uppercase">–û–≤–æ—á—ñ</span>
                            </div>
                        </div>
                        <div class="flex-1">
                            <h3 class="text-2xl font-bold mb-4 text-blue-900 uppercase tracking-tight editable-text">–ü—Ä–∞–≤–∏–ª–æ —Ç–∞—Ä—ñ–ª–∫–∏</h3>
                            <p class="text-blue-800/70 leading-relaxed text-sm mb-6 editable-text">–î—ñ–ª—ñ—Ç—å —Ç–∞—Ä—ñ–ª–∫—É: 50% ‚Äî –æ–≤–æ—á—ñ, 25% ‚Äî –±—ñ–ª–æ–∫, 25% ‚Äî –≤—É–≥–ª–µ–≤–æ–¥–∏.</p>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† (Design: Nutriway, Logic: FastDiet/File2) -->
        <main id="calculator-page" class="page-content pt-32 pb-20">
            <div class="container mx-auto px-4 max-w-5xl">
                <h2 class="text-4xl font-black text-center mb-12 editable-text">–ê–Ω–∞–ª—ñ–∑–∞—Ç–æ—Ä (v2.0)</h2>
                
                <div class="grid lg:grid-cols-1 gap-8">
                    <!-- INPUT FORM -->
                    <div class="bg-white rounded-[2rem] p-8 shadow-xl border border-gray-100 max-w-3xl mx-auto w-full">
                        <h3 class="font-bold text-gray-900 mb-6 flex items-center text-xl">
                            <i class="fas fa-user-edit mr-3 text-green-500"></i> –í–∞—à—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏
                        </h3>
                        
                        <div class="grid md:grid-cols-3 gap-6 mb-6">
                            <div>
                                <label class="text-xs font-bold text-gray-400 mb-2 block ml-1">–í–Ü–ö (—Ä–æ–∫—ñ–≤)</label>
                                <input id="age" type="number" placeholder="25" class="w-full p-4 bg-gray-50 rounded-2xl outline-none focus:ring-2 focus:ring-green-400 transition">
                            </div>
                            <div>
                                <label class="text-xs font-bold text-gray-400 mb-2 block ml-1">–ó–†–Ü–°–¢ (—Å–º)</label>
                                <input id="height" type="number" placeholder="175" class="w-full p-4 bg-gray-50 rounded-2xl outline-none focus:ring-2 focus:ring-green-400 transition">
                            </div>
                            <div>
                                <label class="text-xs font-bold text-gray-400 mb-2 block ml-1">–í–ê–ì–ê (–∫–≥)</label>
                                <input id="weight" type="number" placeholder="70" class="w-full p-4 bg-gray-50 rounded-2xl outline-none focus:ring-2 focus:ring-green-400 transition">
                            </div>
                        </div>

                        <div class="grid md:grid-cols-2 gap-6 mb-6">
                            <div>
                                <label class="text-xs font-bold text-gray-400 mb-2 block ml-1">–ê–õ–ï–†–ì–Ü–á</label>
                                <input id="allergy" type="text" placeholder="–ì–æ—Ä—ñ—Ö–∏, –º–µ–¥..." class="w-full p-4 bg-gray-50 rounded-2xl outline-none focus:ring-2 focus:ring-green-400 transition">
                            </div>
                            <div>
                                <label class="text-xs font-bold text-gray-400 mb-2 block ml-1">–ó–î–û–†–û–í'–Ø</label>
                                <input id="health" type="text" placeholder="–¢—Ä–∞–≤–º–∏..." class="w-full p-4 bg-gray-50 rounded-2xl outline-none focus:ring-2 focus:ring-green-400 transition">
                            </div>
                        </div>

                        <div class="mb-6">
                            <label class="text-xs font-bold text-gray-400 mb-2 block ml-1">–°–¢–ê–¢–¨</label>
                            <div class="flex gap-4">
                                <label class="flex-1 cursor-pointer">
                                    <input type="radio" name="gender" value="male" checked class="peer hidden">
                                    <div class="p-3 rounded-xl bg-gray-50 text-center border-2 border-transparent peer-checked:border-green-500 peer-checked:bg-green-50 peer-checked:text-green-700 transition font-bold text-sm">–ß–æ–ª–æ–≤—ñ–∫</div>
                                </label>
                                <label class="flex-1 cursor-pointer">
                                    <input type="radio" name="gender" value="female" class="peer hidden">
                                    <div class="p-3 rounded-xl bg-gray-50 text-center border-2 border-transparent peer-checked:border-green-500 peer-checked:bg-green-50 peer-checked:text-green-700 transition font-bold text-sm">–ñ—ñ–Ω–∫–∞</div>
                                </label>
                            </div>
                        </div>

                        <div class="mb-8">
                            <label class="text-xs font-bold text-gray-400 mb-2 block ml-1">–ê–ö–¢–ò–í–ù–Ü–°–¢–¨</label>
                            <div class="grid grid-cols-3 sm:grid-cols-5 gap-2">
                                <label class="cursor-pointer">
                                    <input type="radio" name="activity" value="low" class="peer hidden">
                                    <div class="p-2 rounded-lg bg-gray-50 text-center text-xs font-bold border peer-checked:bg-green-500 peer-checked:text-white transition">–ù–∏–∑—å–∫–∞</div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="activity" value="small" class="peer hidden">
                                    <div class="p-2 rounded-lg bg-gray-50 text-center text-xs font-bold border peer-checked:bg-green-500 peer-checked:text-white transition">–ú–∞–ª–∞</div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="activity" value="medium" checked class="peer hidden">
                                    <div class="p-2 rounded-lg bg-gray-50 text-center text-xs font-bold border peer-checked:bg-green-500 peer-checked:text-white transition">–°–µ—Ä–µ–¥–Ω—è</div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="activity" value="high" class="peer hidden">
                                    <div class="p-2 rounded-lg bg-gray-50 text-center text-xs font-bold border peer-checked:bg-green-500 peer-checked:text-white transition">–í–∏—Å–æ–∫–∞</div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="activity" value="very_high" class="peer hidden">
                                    <div class="p-2 rounded-lg bg-gray-50 text-center text-xs font-bold border peer-checked:bg-green-500 peer-checked:text-white transition">–°–ø–æ—Ä—Ç</div>
                                </label>
                            </div>
                        </div>

                        <button onclick="showData()" class="w-full py-4 bg-gradient-to-r from-blue-500 to-green-500 text-white font-bold rounded-2xl shadow-lg hover:shadow-xl hover:scale-[1.02] transition transform">
                            –†–û–ó–†–ê–•–£–í–ê–¢–ò
                        </button>
                        <div class ="mb-8"> 
                            <label class="text-xs font-bold text-gray-400 mb-2 block ml-1">   </label>
                            <div></div>
                        <button onclick="send()" class="w-full py-4 bg-gradient-to-r from-blue-500 to-green-500 text-white font-bold rounded-2xl shadow-lg hover:shadow-xl hover:scale-[1.02] transition transform">
                            –û–¢–†–ò–ú–ê–¢–ò –†–ï–ö–û–ú–ï–î–ê–¶–Ü–á
                        </button>
                        </div>
                        </div>
                        <!-- –õ–æ–≥—ñ–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∑ –¥—Ä—É–≥–æ–≥–æ —Ñ–∞–π–ª—É -->
                        <div id="confirm-buttons" class="hidden mt-4 flex gap-4">
                             <button onclick="clearResult(); showData();" class="flex-1 py-3 bg-green-500 text-white rounded-xl font-bold">–î–∞–Ω—ñ –≤—ñ—Ä–Ω—ñ</button>
                             <button onclick="reTry()" class="flex-1 py-3 bg-red-500 text-white rounded-xl font-bold">–í–∏–ø—Ä–∞–≤–∏—Ç–∏</button>
                        </div>
                    </div>

                    <!-- RESULTS AREA -->
                    <div id="resultArea" class="hidden animate-in fade-in slide-in-from-bottom-4 duration-500 space-y-8 max-w-3xl mx-auto w-full">
                        
                        <!-- Main Stats (Macros Cards) -->
                        <div id="macros-section" class="bg-white rounded-[2rem] p-8 border border-gray-100 shadow-xl hidden">
                            <h4 class="font-bold text-gray-900 mb-6 flex items-center text-xl">
                                <i class="fas fa-chart-pie mr-3 text-blue-500"></i> –û—Å–Ω–æ–≤–Ω—ñ –ø–æ–∫–∞–∑–Ω–∏–∫–∏
                            </h4>
                            <div id="macros-grid-container" class="grid grid-cols-2 md:grid-cols-4 gap-4">
                                <!-- Macros injected by JS -->
                            </div>
                            
                            <!-- IMT & Text Info -->
                            <div class="mt-6 p-6 bg-gray-50 rounded-2xl border border-gray-200">
                                <div id="imt-display" class="font-bold text-lg mb-2 text-gray-800"></div>
                                <div id="text-info" class="text-sm text-gray-600 whitespace-pre-wrap leading-relaxed"></div>
                            </div>
                        </div>

                        <!-- Sleep Card -->
                        <div id="sleep-section" class="bg-white rounded-[2rem] p-8 border border-gray-100 shadow-xl hidden">
                            <h4 class="font-bold text-gray-900 mb-6 flex items-center text-xl">
                                <i class="fas fa-bed mr-3 text-indigo-500"></i> –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∏–π —Å–æ–Ω
                            </h4>
                            <div class="flex items-center p-4 bg-indigo-50 rounded-2xl border border-indigo-100">
                                <div class="text-3xl text-indigo-500 mr-4"><i class="fas fa-moon"></i></div>
                                <div>
                                    <div class="text-xs text-gray-500 font-bold uppercase">–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å</div>
                                    <div id="sleep-value" class="text-xl font-bold text-gray-900"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Vitamin Cards (Visuals) -->
                        <div id="vitamin-section" class="bg-white rounded-[2rem] p-8 border border-gray-100 shadow-xl hidden">
                            <h4 class="font-bold text-gray-900 mb-6 flex items-center text-xl">
                                <i class="fas fa-capsules mr-3 text-purple-500"></i> –í–∞—à–∞ –≤—ñ—Ç–∞–º—ñ–Ω–Ω–∞ –∫–∞—Ä—Ç–∞
                            </h4>
                            <div id="vitamin-grid-container" class="grid md:grid-cols-2 gap-4">
                                <!-- Cards injected by JS -->
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </main>

    </div>

    <!-- ADMIN PANEL -->
    <div id="admin-panel">
        <h3 class="text-xl font-bold mb-4 border-b border-gray-600 pb-2">‚öôÔ∏è –ê–¥–º—ñ–Ω –ü–∞–Ω–µ–ª—å</h3>
        
        <div class="admin-row">
            <button class="btn-history" id="btn-undo" title="Undo"><i class="fas fa-undo"></i></button>
            <button class="btn-history" id="btn-redo" title="Redo"><i class="fas fa-redo"></i></button>
        </div>

        <div id="site-style-controls">
            <span class="admin-label text-blue-400">üé® –°—Ç–∏–ª—ñ –°–∞–π—Ç—É (–ì—Ä–∞–¥—ñ—î–Ω—Ç)</span>
            
            <span class="admin-label">–ö–æ–ª—ñ—Ä –í–µ—Ä—Ö / –ù–∏–∑:</span>
            <div class="admin-row">
                <input type="color" id="site-color-top" value="#059669">
                <input type="color" id="site-color-bot" value="#2563eb">
            </div>

            <span class="admin-label">–ö—É—Ç (deg):</span>
            <input type="number" id="site-gradient-angle" value="135" min="0" max="360" step="5">
        </div>

        <span class="admin-label mt-6">–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤</span>
        <button class="btn-tool" id="add-card-struct">üìÑ + –ö–∞—Ä—Ç–∫–∞</button>
        <button class="btn-tool" id="add-float-text">üí¨ + –¢–µ–∫—Å—Ç</button>
        <button class="btn-tool" id="add-float-img">üñºÔ∏è + –ö–∞—Ä—Ç–∏–Ω–∫–∞</button>
        <button class="btn-tool" id="add-hero-banner">üì¢ + –ë–∞–Ω–µ—Ä (Hero)</button>

        <div id="style-controls">
            <span class="admin-label text-yellow-400">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–æ—Ä</span>

            <span class="admin-label">–†–æ–∑–º—ñ—Ä (px):</span>
            <input type="number" id="font-size-input" value="16">

            <span class="admin-label">–®—Ä–∏—Ñ—Ç:</span>
            <select id="font-select"></select>

            <span class="admin-label">–ö–æ–ª—ñ—Ä —Ç–µ–∫—Å—Ç—É:</span>
            <input type="color" id="color-text">
            
            <span class="admin-label">–§–æ–Ω:</span>
            <div style="display: flex; gap: 5px;">
                <input type="color" id="color-bg" value="#ffffff">
                <button class="btn-tool" style="width: auto; margin: 5px 0 0;" id="btn-no-bg">X</button>
            </div>

            <!-- –î–æ–¥–∞—Ç–∫–æ–≤—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è –ö–∞—Ä—Ç–∫–∏ -->
            <div id="card-style-controls">
                <span class="admin-label text-purple-400">‚ú® –ì—Ä–∞–¥—ñ—î–Ω—Ç –ö–∞—Ä—Ç–∫–∏</span>
                
                <span class="admin-label">–í–µ—Ä—Ö–Ω—ñ–π –∫–æ–ª—ñ—Ä:</span>
                <input type="color" id="card-color-top" value="#667eea">

                <span class="admin-label">–ù–∏–∂–Ω—ñ–π –∫–æ–ª—ñ—Ä:</span>
                <input type="color" id="card-color-bot" value="#764ba2">
                
                <span class="admin-label">–ö–∞—Ä—Ç–∏–Ω–∫–∞ (URL):</span>
                <input type="text" id="card-img-url" placeholder="URL –∫–∞—Ä—Ç–∏–Ω–∫–∏...">
            </div>

            <!-- –î–æ–¥–∞—Ç–∫–æ–≤—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è Hero -->
            <div id="hero-style-controls">
                <span class="admin-label text-red-400">üî• –ë–∞–Ω–µ—Ä –ì—Ä–∞–¥—ñ—î–Ω—Ç</span>
                
                <span class="admin-label">–õ—ñ–≤–æ / –ü—Ä–∞–≤–æ:</span>
                <div class="admin-row">
                    <input type="color" id="hero-grad-top" value="#42a5f5">
                    <input type="color" id="hero-grad-bot" value="#26a69a">
                </div>

                <span class="admin-label">–ö–∞—Ä—Ç–∏–Ω–∫–∞ –∑–≤–µ—Ä—Ö—É (URL):</span>
                <input type="text" id="hero-img-url" placeholder="URL –∫–∞—Ä—Ç–∏–Ω–∫–∏...">
            </div>

            <button class="btn-tool" style="background: #c0392b; margin-top: 20px;" id="btn-delete">üóëÔ∏è –í–∏–¥–∞–ª–∏—Ç–∏</button>
        </div>

        <button class="btn-tool" style="background: #7f8c8d; margin-top: 30px;" onclick="toggleAdmin(false)">–ó–∞–∫—Ä–∏—Ç–∏</button>
    </div>

    <footer class="bg-white py-12 border-t mt-auto text-center">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-center space-x-2 mb-6">
                <i class="fas fa-route text-green-500"></i>
                <span class="text-xl font-bold text-gray-900">Nutriway</span>
            </div>
            <p class="text-gray-400 text-[10px] font-bold uppercase tracking-[0.2em] editable-text">¬© 2025 –í—Å—ñ –ø—Ä–∞–≤–∞ –∑–∞—Ö–∏—â–µ–Ω—ñ</p>
        </div>
    </footer>

    <script>
        // --- 1. NAV LOGIC ---
        function toggleMenu() {
            const menu = document.getElementById('mobile-menu');
            const overlay = document.getElementById('menu-overlay');
            const icon = document.getElementById('menu-icon');
            if (menu.classList.contains('active')) {
                menu.classList.remove('active');
                overlay.classList.remove('active');
                icon.className = "fas fa-bars text-2xl";
                document.body.style.overflow = "auto";
            } else {
                menu.classList.add('active');
                overlay.classList.add('active');
                icon.className = "fas fa-times text-2xl";
                document.body.style.overflow = "hidden";
            }
        }

        function showPage(pageId) {
            document.querySelectorAll('.page-content').forEach(p => p.classList.remove('active'));
            const page = document.getElementById(pageId + '-page');
            if(page) page.classList.add('active');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // --- 2. CALCULATOR LOGIC (File 2) ---
        let ReTryBut = 0;

        function clearResult(){
          // document.getElementById('text-result').innerText=''; // Old text result clearing
          document.getElementById('confirm-buttons').classList.add('hidden');
          document.getElementById('resultArea').classList.add('hidden');
          document.getElementById('vitamin-section').classList.add('hidden');
          document.getElementById('macros-section').classList.add('hidden');
          document.getElementById('sleep-section').classList.add('hidden');
        }
      
        function reTry(){
          ReTryBut=0;
          clearResult();
        }

        function IMT(){
            const height = Number(document.getElementById('height').value);
            const weight = Number(document.getElementById('weight').value);
            if(!height||!weight) return NaN;
            return Number((weight/((height/100)**2)).toFixed(2));
        }

        function IMT_Interpretation(imt_value){
            if(!isFinite(imt_value)) return '–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö';
            if(imt_value<16) return '–í–∏—Ä–∞–∂–µ–Ω–∏–π –¥–µ—Ñ—ñ—Ü–∏—Ç';
            if(imt_value<18.5) return '–î–µ—Ñ—ñ—Ü–∏—Ç –≤–∞–≥–∏';
            if(imt_value<25) return '–ù–æ—Ä–º–∞';
            if(imt_value<30) return '–ü—Ä–µ–¥–æ–∂–∏—Ä—ñ–Ω–Ω—è';
            return '–û–∂–∏—Ä—ñ–Ω–Ω—è';
        }

        function BMR(age,height,weight,gender,activity){
            age=Number(age);height=Number(height);weight=Number(weight);
            const multipliers={very_high:1.9,high:1.725,medium:1.55,small:1.375,low:1.2};
            let bmr = (10*weight)+(6.25*height)-(5*age)+(gender==='male'?5:-161);
            return bmr*(multipliers[activity]??1.55);
        }

        function proteins(activity,weight){const m={very_high:2,high:1.8,medium:1.4,small:1.2,low:0.8}; return Number(weight)*(m[activity]??1.4)}
        function fat(brm_last){return (0.3*brm_last)/9}
        function carb(brm_last){return (0.4*brm_last)/4}

        function vitamins(age,gender,weight,activity){
            age=Number(age);weight=Number(weight);
            const multipliers={very_high:1.4,high:1.2,medium:1.1,small:1,low:0.8};
            const vitaminRDA={Vitamin_C:90,Vitamin_D:800,Vitamin_A:700,Vitamin_B1:1.1,Vitamin_B6:1.3,Vitamin_B12:2.4};
            const genderFactor={male:1,female:0.9};
            let ageFactor = age<=3?0.8:age<=8?0.9:age<=13?1:age<=18?1.1:age<=50?1:1.2;
            const activityMultiplier = multipliers[activity] ?? 1.1;
            const gFactor = genderFactor[gender] ?? 1;
            const weightFactor = (weight>0)?(weight/70):1;
            return {
            Vitamin_D: vitaminRDA.Vitamin_D * ageFactor * gFactor * activityMultiplier * weightFactor,
            Vitamin_C: vitaminRDA.Vitamin_C * ageFactor * gFactor * activityMultiplier * weightFactor,
            Vitamin_B12: vitaminRDA.Vitamin_B12 * ageFactor * gFactor * activityMultiplier * weightFactor,
            Vitamin_A: vitaminRDA.Vitamin_A * ageFactor * gFactor * activityMultiplier * weightFactor,
            Vitamin_B1: vitaminRDA.Vitamin_B1 * ageFactor * gFactor * activityMultiplier * weightFactor,
            Vitamin_B6: vitaminRDA.Vitamin_B6 * ageFactor * gFactor * activityMultiplier * weightFactor
            };
        }

        function getSleepRecommendation(age) {
            if (age >= 1 && age <= 2) return "13 –≥–æ–¥–∏–Ω";
            if (age >= 3 && age <= 5) return "12 –≥–æ–¥–∏–Ω";
            if (age >= 6 && age <= 13) return "10 –≥–æ–¥–∏–Ω";
            if (age >= 14 && age <= 17) return "9 –≥–æ–¥–∏–Ω";
            if (age >= 18 && age <= 25) return "8 –≥–æ–¥–∏–Ω";
            if (age >= 26 && age <= 64) return "8 –≥–æ–¥–∏–Ω";
            if (age >= 65) return "7 –≥–æ–¥–∏–Ω";
            if (age < 1 && age >= 0) return "14-17 –≥–æ–¥–∏–Ω (–Ω–µ–º–æ–≤–ª—è—Ç–∞)";
            return "8 –≥–æ–¥–∏–Ω";
        }

        function showData(){
            const ageRaw = document.getElementById('age').value;
            const heightRaw = document.getElementById('height').value;
            const weightRaw = document.getElementById('weight').value;
            const allergy = document.getElementById('allergy').value; 
            const health = document.getElementById('health').value;   

            const age = Number(ageRaw), height = Number(heightRaw), weight = Number(weightRaw);
            const gender = document.querySelector('input[name="gender"]:checked')?.value || 'male';
            const activity = document.querySelector('input[name="activity"]:checked')?.value || 'medium';
            
            // Logic for "Retry" / "Error" handling
            if(!ageRaw||!heightRaw||!weightRaw){
                document.getElementById('resultArea').classList.remove('hidden');
                document.getElementById('text-info').innerText='–ó–∞–ø–æ–≤–Ω—ñ—Ç—å –≤—Å—ñ –ø–æ–ª—è!';
                document.getElementById('macros-section').classList.remove('hidden'); // Show error container
                return;
            }

            // Logic checking unrealistic values
            if(((age>100||height>250||weight>400)||(age<=5||height<=50||weight<=20)) && ReTryBut==0){
                document.getElementById('resultArea').classList.remove('hidden');
                document.getElementById('macros-section').classList.remove('hidden');
                document.getElementById('text-info').innerText='–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ —É –¥–∞–Ω–∏—Ö? –ó–Ω–∞—á–µ–Ω–Ω—è –≤–∏–≥–ª—è–¥–∞—é—Ç—å –ø—ñ–¥–æ–∑—Ä—ñ–ª–æ.';
                document.getElementById('confirm-buttons').classList.remove('hidden');
                ReTryBut=1; 
                return;
            }

            ReTryBut=0;
            document.getElementById('confirm-buttons').classList.add('hidden');
            document.getElementById('resultArea').classList.remove('hidden');

            try{
                // Calculations
                const bmrVal = BMR(age,height,weight,gender,activity);
                const imtVal = IMT();
                const sleepRec = getSleepRecommendation(age);
                
                const calVal = Number(bmrVal).toFixed(0);
                const protVal = Number(proteins(activity,weight)).toFixed(0);
                const fatVal = Number(fat(bmrVal)).toFixed(0);
                const carbVal = Number(carb(bmrVal)).toFixed(0);

                // --- NEW VISUAL MACROS ---
                const macrosHTML = `
                    <div class="flex flex-col items-center p-4 bg-orange-50 rounded-2xl border border-orange-100">
                        <div class="text-orange-500 text-2xl mb-2"><i class="fas fa-fire"></i></div>
                        <div class="text-xs text-gray-500 font-bold uppercase">–ö–∞–ª–æ—Ä—ñ—ó</div>
                        <div class="text-lg font-bold text-gray-900">${calVal}</div>
                    </div>
                    <div class="flex flex-col items-center p-4 bg-blue-50 rounded-2xl border border-blue-100">
                        <div class="text-blue-500 text-2xl mb-2"><i class="fas fa-dumbbell"></i></div>
                        <div class="text-xs text-gray-500 font-bold uppercase">–ë—ñ–ª–∫–∏</div>
                        <div class="text-lg font-bold text-gray-900">${protVal} –≥</div>
                    </div>
                    <div class="flex flex-col items-center p-4 bg-yellow-50 rounded-2xl border border-yellow-100">
                        <div class="text-yellow-500 text-2xl mb-2"><i class="fas fa-tint"></i></div>
                        <div class="text-xs text-gray-500 font-bold uppercase">–ñ–∏—Ä–∏</div>
                        <div class="text-lg font-bold text-gray-900">${fatVal} –≥</div>
                    </div>
                    <div class="flex flex-col items-center p-4 bg-green-50 rounded-2xl border border-green-100">
                        <div class="text-green-500 text-2xl mb-2"><i class="fas fa-bread-slice"></i></div>
                        <div class="text-xs text-gray-500 font-bold uppercase">–í—É–≥–ª–µ–≤–æ–¥–∏</div>
                        <div class="text-lg font-bold text-gray-900">${carbVal} –≥</div>
                    </div>
                `;
                document.getElementById('macros-grid-container').innerHTML = macrosHTML;
                document.getElementById('macros-section').classList.remove('hidden');

                // IMT Text
                let imtText = `–Ü–ú–¢: ${imtVal} ‚Äî ${IMT_Interpretation(imtVal)}`;
                document.getElementById('imt-display').innerText = imtText;

                // Extra Info
                let extraInfo = '';
                if(allergy) extraInfo += `–ê–ª–µ—Ä–≥—ñ—ó: ${allergy}\n`;
                if(health) extraInfo += `–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ –∑–¥–æ—Ä–æ–≤'—è: ${health}`;
                document.getElementById('text-info').innerText = extraInfo;

                // --- SLEEP CARD ---
                document.getElementById('sleep-value').innerText = sleepRec;
                document.getElementById('sleep-section').classList.remove('hidden');

                // --- VITAMIN CARDS ---
                const vitaminInfo = {
                    Vitamin_C:  { name: "–í—ñ—Ç–∞–º—ñ–Ω C", unit: "–º–≥", icon: "lemon", color: "text-orange-500", desc: "–Ü–º—É–Ω—ñ—Ç–µ—Ç" },
                    Vitamin_D:  { name: "–í—ñ—Ç–∞–º—ñ–Ω D", unit: "IU", icon: "sun", color: "text-yellow-500", desc: "–ö—ñ—Å—Ç–∫–∏" },
                    Vitamin_A:  { name: "–í—ñ—Ç–∞–º—ñ–Ω A", unit: "–º–∫–≥", icon: "eye", color: "text-green-500", desc: "–ó—ñ—Ä" },
                    Vitamin_B1: { name: "–í—ñ—Ç–∞–º—ñ–Ω B1", unit: "–º–≥", icon: "bolt", color: "text-red-500", desc: "–ï–Ω–µ—Ä–≥—ñ—è" },
                    Vitamin_B6: { name: "–í—ñ—Ç–∞–º—ñ–Ω B6", unit: "–º–≥", icon: "capsules", color: "text-purple-500", desc: "–û–±–º—ñ–Ω" },
                    Vitamin_B12:{ name: "–í—ñ—Ç–∞–º—ñ–Ω B12", unit: "–º–∫–≥", icon: "brain", color: "text-pink-500", desc: "–ö—Ä–æ–≤" }
                };
                
                const vitaminValues = vitamins(age, gender, weight, activity);
                const gridContainer = document.getElementById('vitamin-grid-container');
                
                let cardsHTML = '';
                for (const key in vitaminValues) {
                    const val = vitaminValues[key];
                    const info = vitaminInfo[key];
                    cardsHTML += `
                        <div class="vit-item">
                            <div class="vit-icon-box ${info.color}"><i class="fas fa-${info.icon}"></i></div>
                            <div>
                                <h5 class="font-bold text-sm text-gray-800">${info.name}</h5>
                                <p class="font-bold text-gray-900">${val.toFixed(2)} ${info.unit}</p>
                            </div>
                        </div>`;
                }
                gridContainer.innerHTML = cardsHTML;
                document.getElementById('vitamin-section').classList.remove('hidden');

            } catch(err){ console.error(err); }
        }

        // --- 3. ADMIN PANEL LOGIC (Ported from File 2) ---
        let isAdmin = false;
        let selectedElement = null;
        let isDragging = false;
        let isResizing = false;
        let startX, startY, startLeft, startTop, startWidth, startHeight;
        
        // History
        const historyStack = [];
        let historyIndex = -1;

        function openAdminAuth() {
            setTimeout(() => {
                const pass = prompt("–ü–∞—Ä–æ–ª—å:", "Admin_GPT");
                if (pass === "Admin_GPT") toggleAdmin(true);
                else alert("–ù–µ–≤—ñ—Ä–Ω–∏–π –ø–∞—Ä–æ–ª—å");
            }, 100);
        }

        function toggleAdmin(active) {
            isAdmin = active;
            const panel = document.getElementById('admin-panel');
            if (active) {
                panel.classList.add('active');
                if (historyStack.length === 0) saveState();
                updateSiteControls();
            } else {
                panel.classList.remove('active');
                deselect();
            }
        }

        function saveState() {
            if (!isAdmin) return;
            const content = document.getElementById('content-area').innerHTML;
            const rootStyle = getComputedStyle(document.documentElement);
            const siteStyles = {
                '--site-color-top': rootStyle.getPropertyValue('--site-color-top'),
                '--site-color-bot': rootStyle.getPropertyValue('--site-color-bot'),
                '--site-gradient-angle': rootStyle.getPropertyValue('--site-gradient-angle')
            };
            historyStack.push({ content, siteStyles });
            historyIndex++;
        }

        function restoreState(index) {
             /* Basic History implementation */
        }

        // Color Controls
        function updateSiteGradient() {
            const top = document.getElementById('site-color-top').value;
            const bot = document.getElementById('site-color-bot').value;
            const angle = document.getElementById('site-gradient-angle').value;
            
            document.documentElement.style.setProperty('--site-color-top', top);
            document.documentElement.style.setProperty('--site-color-bot', bot);
            document.documentElement.style.setProperty('--site-gradient-angle', angle + 'deg');
        }

        function updateSiteControls() {
            const style = getComputedStyle(document.documentElement);
            document.getElementById('site-color-top').value = style.getPropertyValue('--site-color-top').trim();
            document.getElementById('site-color-bot').value = style.getPropertyValue('--site-color-bot').trim();
        }

        document.getElementById('site-color-top').oninput = updateSiteGradient;
        document.getElementById('site-color-bot').oninput = updateSiteGradient;
        document.getElementById('site-gradient-angle').oninput = updateSiteGradient;

        // --- NEW CREATION LOGIC FOR CARDS & BANNERS ---
        document.getElementById('add-card-struct').onclick = () => {
            // Find a grid container in the active section or content area
            let grid = document.querySelector('.page-content.active .grid');
            if (!grid) {
                // If no grid found, try finding the ID from diag section
                grid = document.getElementById('diag-grid');
            }
            if (!grid) {
               // If absolutely no grid, create a floating one? Or just append to container
               alert("–ù–µ –∑–Ω–∞–π–¥–µ–Ω–æ —Å—ñ—Ç–∫–∏ (grid) –Ω–∞ –∞–∫—Ç–∏–≤–Ω—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –∫–∞—Ä—Ç–∫–∏.");
               return;
            }

            const card = document.createElement('div');
            card.className = 'card'; // Custom class from styling
            card.style.setProperty('--card-color-top', '#667eea');
            card.style.setProperty('--card-color-bot', '#764ba2');
            
            card.innerHTML = `
                <img src="https://images.unsplash.com/photo-1579546929518-9e396f3cc809?w=500&auto=format&fit=crop" class="card-image" alt="New">
                <div class="card-content">
                    <h2 class="editable-text">–ó–∞–≥–æ–ª–æ–≤–æ–∫</h2>
                    <p class="editable-text">–í–∞—à –æ–ø–∏—Å —Ç—É—Ç.</p>
                </div>
            `;
            grid.appendChild(card);
            saveState();
        };

        document.getElementById('add-hero-banner').onclick = () => {
            createMovableElement('hero', '');
        };

        document.getElementById('add-float-text').onclick = () => createMovableElement('text', '–í–∞—à —Ç–µ–∫—Å—Ç');
        document.getElementById('add-float-img').onclick = () => {
            const url = prompt("URL:", "https://source.unsplash.com/random/200x200");
            if(url) createMovableElement('img', url);
        };

        function createMovableElement(type, content) {
            const container = document.querySelector('.page-content.active .container');
            const box = document.createElement('div');
            box.className = 'movable-box';
            box.style.left = '50px'; box.style.top = '100px';
            
            const inner = document.createElement('div');
            inner.className = 'movable-content';

            if (type === 'text') {
                inner.innerText = content;
                inner.style.padding = '10px';
                inner.style.background = 'white';
                inner.classList.add('editable-text');
                box.style.width = '200px';
            } else if (type === 'img') {
                const img = document.createElement('img');
                img.src = content; img.style.width='100%'; img.style.height='100%';
                inner.appendChild(img);
                box.style.width = '200px'; box.style.height = '200px';
            } else if (type === 'hero') {
                box.style.width = '100%'; 
                box.style.maxWidth = '800px';
                box.style.height = '250px';
                inner.classList.add('hero-banner-style'); 
                inner.innerHTML = `
                    <img src="" class="hero-banner-img" style="display: none;">
                    <h2 class="editable-text text-2xl font-bold">–ó–¥–æ—Ä–æ–≤–µ —Ö–∞—Ä—á—É–≤–∞–Ω–Ω—è</h2>
                    <p class="editable-text">–í–∞—à —à–ª—è—Ö –¥–æ —ñ–¥–µ–∞–ª—å–Ω–æ—ó —Ñ–æ—Ä–º–∏.</p>
                `;
            }
            
            const handle = document.createElement('div');
            handle.className = 'resize-handle';
            
            box.appendChild(inner);
            box.appendChild(handle);
            container.appendChild(box);
            selectElement(box);
            saveState();
        }

        // Selection & Styling
        function selectElement(el) {
            if(selectedElement && selectedElement !== el) deselect();
            selectedElement = el;
            
            document.querySelectorAll('.selected-element').forEach(e => e.classList.remove('selected-element'));
            el.classList.add('selected-element');
            document.getElementById('style-controls').classList.add('active');

            // Hide special panels
            document.getElementById('card-style-controls').style.display = 'none';
            document.getElementById('hero-style-controls').style.display = 'none';

            // --- DETECT TYPE & SHOW CONTROLS ---
            
            // 1. –Ø–∫—â–æ –≤–∏–±—Ä–∞–Ω–∞ –ö–ê–†–¢–ö–ê (–≤–æ–Ω–∞ –º–æ–∂–µ –±—É—Ç–∏ –ø—Ä–æ—Å—Ç–æ –≤ DOM, –Ω–µ –≤ movable-box, –∞–±–æ –≤ movable-box)
            if (el.classList.contains('card')) {
                document.getElementById('card-style-controls').style.display = 'block';
                const topVal = el.style.getPropertyValue('--card-color-top') || '#667eea';
                const botVal = el.style.getPropertyValue('--card-color-bot') || '#764ba2';
                
                document.getElementById('card-color-top').value = rgbToHex(topVal.trim());
                document.getElementById('card-color-bot').value = rgbToHex(botVal.trim());

                const img = el.querySelector('img');
                if(img) document.getElementById('card-img-url').value = img.src;
            }

            // 2. –Ø–∫—â–æ –≤–∏–±—Ä–∞–Ω–∏–π HERO BANNER
            if (el.classList.contains('movable-box') && el.querySelector('.hero-banner-style')) {
                document.getElementById('hero-style-controls').style.display = 'block';
                const heroInner = el.querySelector('.hero-banner-style');
                
                const hTop = heroInner.style.getPropertyValue('--hero-bg-top') || '#42a5f5';
                const hBot = heroInner.style.getPropertyValue('--hero-bg-bot') || '#26a69a';
                
                document.getElementById('hero-grad-top').value = rgbToHex(hTop.trim());
                document.getElementById('hero-grad-bot').value = rgbToHex(hBot.trim());

                const heroImg = heroInner.querySelector('.hero-banner-img');
                if (heroImg && heroImg.src && heroImg.style.display !== 'none') {
                    document.getElementById('hero-img-url').value = heroImg.src;
                } else {
                    document.getElementById('hero-img-url').value = '';
                }
            }
        }

        function deselect() {
            if (selectedElement) {
                selectedElement.classList.remove('selected-element');
                if (selectedElement.isContentEditable) selectedElement.contentEditable = "false";
                selectedElement = null;
                document.getElementById('style-controls').classList.remove('active');
            }
        }

        // --- FONTS INIT ---
        function initFonts() {
            const fonts = [
          "Montserrat", "Roboto", "Open Sans", "Oswald", "Pacifico",
          "Lobster", "Comfortaa", "Arial", "Helvetica",
          "Times New Roman", "Courier New", "Georgia",
          "Play", "Merriweather", "Amatic SC",
          "Lucida Sans Unicode", "Segoe UI",
          // —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω—ñ
          "Inter", "Poppins", "Lato", "Nunito", "Raleway",
          "Ubuntu", "DM Sans", "Manrope",
          // –∑–∞–≥–æ–ª–æ–≤–∫–∏
          "Bebas Neue", "Anton", "Playfair Display", "Cinzel",
          // –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ñ
          "Dancing Script", "Great Vibes", "Indie Flower",
          // –º–æ–Ω–æ
          "JetBrains Mono", "Fira Code",
          // —Å–∏—Å—Ç–µ–º–Ω—ñ
          "Verdana", "Tahoma", "Calibri", "Consolas"];
            const sel = document.getElementById('font-select');
            fonts.forEach(f => {
                const opt = document.createElement('option');
                opt.value = f; opt.innerText = f;
                sel.appendChild(opt);
            });
        }
        initFonts();

        // Helper
        function rgbToHex(rgb) {
            if(!rgb || rgb.includes('rgba(0, 0, 0, 0)') || rgb === 'transparent') return "#ffffff";
            if(rgb.startsWith('#')) return rgb;
            let sep = rgb.indexOf(",") > -1 ? "," : " ";
            let rgbArr = rgb.substr(4).split(")")[0].split(sep);
            if (rgbArr.length === 4) rgbArr.pop();
            let r = (+rgbArr[0]).toString(16), g = (+rgbArr[1]).toString(16), b = (+rgbArr[2]).toString(16);
            if(r.length==1)r="0"+r; if(g.length==1)g="0"+g; if(b.length==1)b="0"+b;
            return "#" + r + g + b;
        }

        // Interaction
        document.addEventListener('mousedown', (e) => {
            if (!isAdmin) return;
            const target = e.target;
            if (target.closest('#admin-panel')) return;

            // Resizing
            if (target.classList.contains('resize-handle')) {
                e.preventDefault(); e.stopPropagation();
                isResizing = true;
                selectedElement = target.parentElement;
                startX = e.clientX; startY = e.clientY;
                startWidth = selectedElement.offsetWidth;
                startHeight = selectedElement.offsetHeight;
                return;
            }

            // Dragging Box
            const box = target.closest('.movable-box');
            if (box) {
                if (target.classList.contains('editable-text')) {
                     selectElement(target); target.contentEditable = "true"; target.focus(); return;
                }
                e.preventDefault();
                selectElement(box);
                isDragging = true;
                startX = e.clientX; startY = e.clientY;
                startLeft = box.offsetLeft; startTop = box.offsetTop;
                return;
            }

            // Selection of Cards (static or dynamic)
            const card = target.closest('.card');
            if(card) {
                e.preventDefault();
                selectElement(card);
                return;
            }

            // Edit Text on Page
            if (target.classList.contains('editable-text')) {
                selectElement(target);
                target.contentEditable = "true";
                return;
            }

            deselect();
        });

        document.addEventListener('mousemove', (e) => {
            if (!isAdmin) return;
            if (isDragging && selectedElement) {
                const dx = e.clientX - startX;
                const dy = e.clientY - startY;
                selectedElement.style.left = (startLeft + dx) + 'px';
                selectedElement.style.top = (startTop + dy) + 'px';
            }
            if (isResizing && selectedElement) {
                const dx = e.clientX - startX;
                const dy = e.clientY - startY;
                selectedElement.style.width = (startWidth + dx) + 'px';
                selectedElement.style.height = (startHeight + dy) + 'px';
            }
        });

        document.addEventListener('mouseup', () => { isDragging = false; isResizing = false; });

        // Style Application
        function applyStyle(prop, val) {
            if (!selectedElement) return;
            // Handle Card vs Movable Box vs Text
            let target = selectedElement;
            if (selectedElement.classList.contains('movable-box')) {
                target = selectedElement.querySelector('.movable-content');
            }
            target.style[prop] = val;
        }

        // CSS Variables update helper
        function updateCSSVar(el, varName, val) {
            if(!el) return;
            el.style.setProperty(varName, val);
        }

        document.getElementById('color-text').oninput = (e) => applyStyle('color', e.target.value);
        document.getElementById('font-size-input').onchange = (e) => applyStyle('fontSize', e.target.value + 'px');
        document.getElementById('font-select').onchange = (e) => applyStyle('fontFamily', e.target.value);
        
        document.getElementById('color-bg').oninput = (e) => applyStyle('backgroundColor', e.target.value);
        document.getElementById('btn-no-bg').onclick = () => { document.getElementById('color-bg').value='#000000'; applyStyle('backgroundColor', 'transparent'); }
        document.getElementById('btn-delete').onclick = () => { if(selectedElement) selectedElement.remove(); deselect(); };

        // --- Controls for Cards ---
        document.getElementById('card-color-top').oninput = (e) => updateCSSVar(selectedElement, '--card-color-top', e.target.value);
        document.getElementById('card-color-bot').oninput = (e) => updateCSSVar(selectedElement, '--card-color-bot', e.target.value);
        document.getElementById('card-img-url').oninput = (e) => {
            if (!selectedElement || !selectedElement.classList.contains('card')) return;
            const img = selectedElement.querySelector('img');
            if(img && e.target.value.trim() !== "") img.src = e.target.value;
        };

        // --- Controls for Hero Banner ---
        document.getElementById('hero-grad-top').oninput = (e) => {
            const inner = selectedElement.querySelector('.hero-banner-style');
            updateCSSVar(inner, '--hero-bg-top', e.target.value);
        };
        document.getElementById('hero-grad-bot').oninput = (e) => {
            const inner = selectedElement.querySelector('.hero-banner-style');
            updateCSSVar(inner, '--hero-bg-bot', e.target.value);
        };
        document.getElementById('hero-img-url').oninput = (e) => {
            const inner = selectedElement.querySelector('.hero-banner-style');
            if (!inner) return;
            let img = inner.querySelector('.hero-banner-img');
            if (e.target.value.trim() !== "") {
                img.src = e.target.value;
                img.style.display = 'block';
            } else {
                img.style.display = 'none';
            }
        };

    </script>
</body>
</html>