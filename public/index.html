<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FastDiet | Ultimate Editor</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto:wght=400;700&family=Open+Sans&family=Oswald&family=Pacifico&family=Lobster&family=Amatic+SC&family=Merriweather&family=Comfortaa&display=swap" rel="stylesheet">
    
    <style>
        /* --- 1. –ë–ê–ó–ê –¢–ê –ö–û–õ–¨–û–†–ò --- */
        :root {
            --primary: rgb(28, 201, 115);
            --secondary: rgb(66, 135, 245);
            --bg-card: rgba(255, 255, 255, 0.95);
            --text-main: #333333;
            --font-main: 'Montserrat', sans-serif;
            --site-gradient: linear-gradient(135deg, var(--secondary), var(--primary)); 
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: var(--font-main);
            color: var(--text-main);
            line-height: 1.6;
            min-height: 100vh;
            display: flex; flex-direction: column;
            overflow-x: hidden;
            background: var(--site-gradient); 
            background-attachment: fixed;
        }

        /* --- 2. –î–ò–°–ö–õ–ï–ô–ú–ï–† (MODAL) --- */
        #disclaimer-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            z-index: 10000;
            display: flex; justify-content: center; align-items: center;
        }
        .disclaimer-box {
            background: white; padding: 30px; border-radius: 15px;
            max-width: 500px; text-align: center;
            box-shadow: 0 0 30px rgba(0,255,0,0.3);
            animation: popIn 0.5s ease;
        }
        .disclaimer-btn {
            background: var(--primary); color: white;
            border: none; padding: 12px 30px; font-size: 18px;
            border-radius: 30px; cursor: pointer; margin-top: 20px;
            font-weight: bold; transition: 0.3s;
        }
        .disclaimer-btn:hover { transform: scale(1.05); background: #17a05d; }

        @keyframes popIn { from{transform: scale(0.8); opacity:0;} to{transform: scale(1); opacity:1;} }

        /* --- 3. –•–ï–î–ï–† --- */
        header {
            background: var(--bg-card);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky; top: 0; z-index: 1000;
            padding: 15px 0;
            border-bottom: 3px solid var(--primary);
        }
        .container { width: 90%; max-width: 1200px; margin: 0 auto; position: relative; }
        .flex-between { display: flex; justify-content: space-between; align-items: center; }
        
        .logo { font-size: 26px; font-weight: 800; color: var(--secondary); cursor: pointer; text-transform: uppercase; }
        
        /* –ö–Ω–æ–ø–∫–∞ –ì–∞–º–±—É—Ä–≥–µ—Ä */
        .hamburger-btn {
            display: flex; flex-direction: column; justify-content: space-between;
            width: 30px; height: 21px; cursor: pointer;
            z-index: 2001; /* –ü–æ–≤–µ—Ä—Ö –º–µ–Ω—é */
        }
        .bar {
            width: 100%; height: 3px; 
            background-color: var(--secondary); 
            border-radius: 3px; transition: 0.3s;
        }
        
        /* –ê–Ω—ñ–º–∞—Ü—ñ—è –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –≥–∞–º–±—É—Ä–≥–µ—Ä–∞ –≤ —Ö—Ä–µ—Å—Ç–∏–∫ */
        .menu-open .bar:nth-child(1) { transform: translateY(9px) rotate(45deg); }
        .menu-open .bar:nth-child(2) { opacity: 0; }
        .menu-open .bar:nth-child(3) { transform: translateY(-9px) rotate(-45deg); }

        /* --- –û–ù–û–í–õ–ï–ù–ï –ë–Ü–ß–ù–ï –ú–ï–ù–Æ (–°–ü–†–ê–í–ê –ù–ê–õ–Ü–í–û) --- */
        #side-menu {
            position: fixed; top: 0; 
            right: 0;
            left: auto;
            width: 280px; height: 100vh;
            background: rgba(255, 255, 255, 0.98);
            box-shadow: -5px 0 20px rgba(0,0,0,0.2);
            z-index: 2000;
            display: flex; flex-direction: column; 
            align-items: center;
            padding-top: 80px;
            
            transform: translateX(100%);
            transition: transform 0.5s cubic-bezier(0.77, 0.2, 0.05, 1.0);
        }
        
        #side-menu.active {
            transform: translateX(0);
        }

        /* –°—Ç–∏–ª—ñ –ø–æ—Å–∏–ª–∞–Ω—å –≤ –º–µ–Ω—é */
        .side-nav-item {
            font-size: 22px; font-weight: 700;
            color: #333; text-decoration: none;
            margin: 15px 0; cursor: pointer;
            position: relative;
            
            opacity: 0;
            transform: translateX(50px);
            transition: opacity 0.4s ease, transform 0.4s ease;
        }

        .side-nav-item:hover { color: var(--primary); }
        .side-nav-item.active { color: var(--primary); }
        .side-nav-item.active::after {
            content: ''; position: absolute; left: 0; bottom: -5px; 
            width: 100%; height: 3px; background: var(--primary);
        }

        .side-nav-item.admin-link {
            margin-top: auto; 
            margin-bottom: 50px;
            color: #e74c3c;
            border: 2px solid #e74c3c;
            padding: 5px 20px;
            border-radius: 20px;
            font-size: 18px;
        }
        .side-nav-item.admin-link:hover {
            background: #e74c3c;
            color: white;
        }

        #side-menu.active .side-nav-item {
            opacity: 1;
            transform: translateX(0);
        }
        
        #side-menu.active .side-nav-item:nth-child(1) { transition-delay: 0.2s; }
        #side-menu.active .side-nav-item:nth-child(2) { transition-delay: 0.3s; }
        #side-menu.active .side-nav-item:nth-child(3) { transition-delay: 0.4s; }
        #side-menu.active .side-nav-item:nth-child(4) { transition-delay: 0.5s; }
        #side-menu.active .side-nav-item:nth-child(5) { transition-delay: 0.6s; }


        #menu-backdrop {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); z-index: 1999;
            opacity: 0; pointer-events: none; transition: 0.5s;
        }
        #menu-backdrop.active { opacity: 1; pointer-events: auto; }


        /* --- 4. –°–¢–†–£–ö–¢–£–†–ê --- */
        .page-section { display: none; animation: fadeIn 0.5s ease; padding-bottom: 50px; min-height: 600px; }
        .page-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .hero {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(5px);
            color: white; text-align: center;
            padding: 80px 0; margin: 30px 0;
            border-radius: 20px; border: 1px solid rgba(255,255,255,0.3);
        }
        
        .grid-3 {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px; margin-top: 40px; align-items: start; justify-items: center;
        }

        /* --- –î–ò–ó–ê–ô–ù –ö–ê–†–¢–ö–ò --- */
        .card {
            --card-color-top: #667eea;
            --card-color-bot: #764ba2;
            
            background: linear-gradient(135deg, var(--card-color-top) 0%, var(--card-color-bot) 100%);
            width: 100%;
            max-width: 320px; 
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            overflow: hidden;
            color: white;
            transition: transform 0.3s ease;
            text-align: center;
            padding-bottom: 20px;
        }
        .card:hover { transform: translateY(-5px); }
        .card-image {
            width: 100%; height: 200px; object-fit: cover;
            background-color: #ddd; pointer-events: none; 
        }
        .card-content h2 { margin: 15px 0 5px; font-size: 1.5em; }
        .card-content p { padding: 0 15px; opacity: 0.9; font-size: 0.95em; }
        
        /* --- 5. –ü–õ–ê–í–ê–Æ–ß–Ü –ï–õ–ï–ú–ï–ù–¢–ò (Hero Banner) --- */
        .movable-box {
            position: absolute; display: inline-block; cursor: grab;
            border: 1px dashed transparent; min-width: 50px; min-height: 50px; z-index: 100;
        }
        .movable-box.selected-element, .card.selected-element, .selected-text {
            outline: 2px dashed #ffeb3b; outline-offset: 2px; z-index: 500;
        }
        .movable-box img { width: 100%; height: 100%; display: block; pointer-events: none; }
        .movable-content { width: 100%; height: 100%; overflow: hidden; }
        
        /* –ù–û–í–ò–ô –°–¢–ò–õ–¨ HERO BANNER */
        .hero-banner-style {
            /* –ì—Ä–∞–¥—ñ—î–Ω—Ç –Ω–∞ –∑–∞–¥–Ω—å–æ–º—É –ø–ª–∞–Ω—ñ */
            --hero-bg-top: #42a5f5;
            --hero-bg-bot: #26a69a;
            background: linear-gradient(90deg, var(--hero-bg-top), var(--hero-bg-bot));
            
            width: 100%; height: 100%;
            border-radius: 20px;
            position: relative;
            display: flex; flex-direction: column; 
            justify-content: center; align-items: center;
            color: white; text-align: center;
            box-shadow: inset 0 0 0 1px rgba(255,255,255,0.2), 0 5px 15px rgba(0,0,0,0.1); 
            padding: 20px;
            overflow: hidden;
        }
        
        /* –ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –±–∞–Ω–µ—Ä–∞ (–ó–≤–µ—Ä—Ö—É) */
        .hero-banner-img {
            width: 100%; 
            max-height: 150px; /* –û–±–º–µ–∂–µ–Ω–Ω—è –≤–∏—Å–æ—Ç–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∏ */
            object-fit: cover; 
            border-radius: 10px;
            margin-bottom: 15px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            /* –Ø–∫—â–æ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –Ω–µ–º–∞—î, –≤–æ–Ω–∞ —Å—Ö–æ–≤–∞—î—Ç—å—Å—è (—á–µ—Ä–µ–∑ JS) */
        }

        /* –¢–µ–∫—Å—Ç –Ω–∞ –ø–µ—Ä–µ–¥–Ω—å–æ–º—É –ø–ª–∞–Ω—ñ */
        .hero-banner-style h2, .hero-banner-style p {
            position: relative; z-index: 2; /* –¢–µ–∫—Å—Ç –ø–æ–≤–µ—Ä—Ö –≥—Ä–∞–¥—ñ—î–Ω—Ç–∞ */
            text-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        /* –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞ —Ä–∞–º–∫–∞ */
        .hero-banner-style::after {
            content: ''; position: absolute;
            top: 10px; left: 10px; right: 10px; bottom: 10px;
            border: 1px solid rgba(255,255,255,0.4); border-radius: 15px; pointer-events: none;
            z-index: 1;
        }

        .resize-handle {
            width: 15px; height: 15px; background: white; border: 2px solid var(--primary);
            position: absolute; right: -7px; bottom: -7px; cursor: se-resize;
            display: none; z-index: 501;
        }
        .movable-box.selected-element .resize-handle { display: block; }

        /* --- 6. –ê–î–ú–Ü–ù –ü–ê–ù–ï–õ–¨ --- */
        #admin-panel {
            position: fixed; top: 0; right: -360px;
            width: 340px; height: 100vh;
            background: rgba(44, 62, 80, 0.98); 
            color: #ecf0f1; padding: 20px; 
            box-shadow: -5px 0 20px rgba(0,0,0,0.5);
            z-index: 9999; transition: right 0.4s ease;
            overflow-y: auto; font-family: 'Roboto', sans-serif;
        }
        #admin-panel.active { right: 0; }
        
        .admin-row { display: flex; gap: 10px; margin-bottom: 15px; }
        .btn-history { flex: 1; text-align: center; font-size: 1.2em; padding: 8px; background: #e67e22; border: none; border-radius: 5px; cursor: pointer; }
        .btn-history:disabled { opacity: 0.5; cursor: not-allowed; }

        .btn-tool { 
            background: #34495e; color: white; border: 1px solid #5d6d7e; 
            cursor: pointer; padding: 10px; margin-top: 5px; width: 100%; 
            text-align: left; border-radius: 5px; transition: 0.2s;
        }
        .btn-tool:hover { background: #415b76; transform: translateX(5px); }

        label { color: #bdc3c7; font-size: 0.8em; text-transform: uppercase; margin-top: 15px; display: block; }
        input:not([type="color"]):not([type="checkbox"]), select, input[type="number"] { width: 100%; height: 35px; margin-top: 5px; border-radius: 4px; border:none; padding: 0 10px; }
        input[type="color"] { width: 100%; height: 35px; margin-top: 5px; border-radius: 4px; border:none; }
        input[type="text"] { width: 100%; height: 35px; margin-top: 5px; border-radius: 4px; border:none; padding: 0 10px; }

        #site-style-controls, #style-controls { margin-top: 20px; border-top: 1px solid #555; padding-top: 10px;}
        #style-controls { opacity: 0.3; pointer-events: none; }
        #style-controls.active { opacity: 1; pointer-events: auto; }
        
        /* –°–µ–∫—Ü—ñ—ó –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å (–ø—Ä–∏—Ö–æ–≤–∞–Ω—ñ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º) */
        #card-style-controls, #hero-style-controls { display: none; margin-top: 15px; padding-top: 15px; border-top: 1px solid #444; }
        
        .card.selected-element #card-style-controls { display: block; }

        footer { background: rgba(0,0,0,0.3); color: white; padding: 30px; text-align: center; margin-top: auto; }

        /* --- 7. –°–¢–ò–õ–Ü –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–†–ê (–ù–û–í–ï) --- */
        .form-card {
            background-color: #ffffff;
            padding: 2.5rem;
            border-radius: 24px;
            box-shadow: 0 15px 35px -5px rgba(0, 0, 0, 0.15), 0 10px 10px -5px rgba(0, 0, 0, 0.1);
            max-width: 700px;
            width: 100%;
            margin: 40px auto;
            color: #1f2937;
        }
        
        .form-title {
            text-align: center; color: var(--text-main); margin-bottom: 1.5rem; font-size: 1.8rem; font-weight: 800;
        }

        .inputs-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        /* –ü–æ–ª—è –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É */
        .inputs-row input#allergy, .inputs-row input#health {
            grid-column: 1 / -1;
        }

        /* –°—Ç–∏–ª—ñ–∑–∞—Ü—ñ—è —ñ–Ω–ø—É—Ç—ñ–≤ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ (–ø–µ—Ä–µ–±–∏–≤–∞—î –∞–¥–º—ñ–Ω—Å—å–∫—ñ —Å—Ç–∏–ª—ñ) */
        .form-card input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
            box-sizing: border-box;
            background: #f9fafb;
            color: #1f2937;
        }

        .form-card input:focus {
            outline: none;
            border-color: var(--primary);
            background: white;
            box-shadow: 0 0 0 4px rgba(28, 201, 115, 0.2);
        }

        /* –†–∞–¥—ñ–æ –∫–Ω–æ–ø–∫–∏ */
        .radio-line {
            display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 20px;
        }

        .radio-line label {
            display: flex; align-items: center; cursor: pointer;
            background: #f3f4f6; padding: 8px 16px;
            border-radius: 30px; border: 1px solid transparent;
            transition: 0.2s; font-size: 14px; font-weight: 500;
        }
        
        .radio-line label:hover { background: #e5e7eb; }
        .radio-line input[type="radio"] { margin-right: 8px; width: auto; height: auto; accent-color: var(--primary); }

        /* –ö–Ω–æ–ø–∫–∏ */
        .controls { display: flex; justify-content: center; gap: 10px; margin-top: 25px; flex-wrap: wrap; }
        
        .calc-btn {
            padding: 14px 28px; font-size: 16px; font-weight: 700; border: none; border-radius: 12px;
            cursor: pointer; transition: transform 0.1s, box-shadow 0.2s;
            text-transform: uppercase; letter-spacing: 0.5px;
        }
        .calc-btn:active { transform: scale(0.97); }

        #showBtn { background-color: var(--primary); color: white; width: 100%; box-shadow: 0 4px 15px rgba(28, 201, 115, 0.4); }
        #showBtn:hover { background-color: #17a05d; }

        #correctBtn { background-color: var(--secondary); color: white; flex: 1; }
        #wrongBtn { background-color: #ef4444; color: white; flex: 1; }

        /* –†–µ–∑—É–ª—å—Ç–∞—Ç */
        .result-title { font-size: 1.2rem; margin-bottom: 10px; border-bottom: 2px solid #e5e7eb; padding-bottom: 5px; color: #374151; }
        
        .result-wrap {
            background: #111827; color: #10b981; /* Matrix green text */
            padding: 20px; border-radius: 12px;
            min-height: 50px; overflow-x: auto;
            font-family: 'Courier New', Courier, monospace;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.5);
        }
        pre { white-space: pre-wrap; margin: 0; line-height: 1.5; }
        /* --- –û–ù–û–í–õ–ï–ù–ò–ô –î–ò–ó–ê–ô–ù –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–†–ê (Compact) --- */
        .calc-wrapper {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 40px 20px;
        }

        .compact-form {
            background: #ffffff;
            width: 100%;
            max-width: 480px; /* –†–æ–±–∏–º–æ —Ñ–æ—Ä–º—É –≤—É–∑—å–∫–æ—é —Ç–∞ –∞–∫—É—Ä–∞—Ç–Ω–æ—é */
            padding: 30px;
            border-radius: 24px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.15);
            font-family: 'Montserrat', sans-serif;
        }

        .compact-form h1 {
            text-align: center;
            font-size: 24px;
            color: #333;
            margin-bottom: 25px;
            font-weight: 800;
        }

        /* –°—Ç–∏–ª—å –¥–ª—è –ø–æ–ª—ñ–≤ –≤–≤–æ–¥—É –∑ –ø—ñ–¥–ø–∏—Å–∞–º–∏ –∑–≤–µ—Ä—Ö—É */
        .input-group {
            margin-bottom: 15px;
        }
        
        .input-label {
            display: block;
            font-size: 13px;
            font-weight: 700;
            color: #6b7280;
            margin-bottom: 6px;
            margin-left: 4px;
        }

        .compact-form input[type="number"], 
        .compact-form input[type="text"] {
            width: 100%;
            padding: 12px 16px;
            background: #f3f4f6;
            border: 2px solid transparent;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            color: #1f2937;
            transition: all 0.3s ease;
        }

        .compact-form input:focus {
            background: #fff;
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 4px rgba(28, 201, 115, 0.1);
        }

        /* –†–æ–∑–º—ñ—â—É—î–º–æ –í—ñ–∫, –ó—Ä—ñ—Å—Ç, –í–∞–≥—É –≤ –æ–¥–∏–Ω —Ä—è–¥ */
        .row-3-cols {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
        }

        /* --- –ö–†–ê–°–ò–í–Ü –†–ê–î–Ü–û –ö–ù–û–ü–ö–ò (–ü–õ–ò–¢–ö–ò) --- */
        .radio-section-title {
            font-size: 14px;
            font-weight: 700;
            color: #374151;
            margin: 20px 0 10px;
        }

        .radio-tiles {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        /* –•–æ–≤–∞—î–º–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –∫—Ä—É–∂–µ—á–æ–∫ —Ä–∞–¥—ñ–æ */
        .radio-tiles input[type="radio"] {
            display: none;
        }

        /* –°—Ç–∏–ª—å –ª–µ–π–±–ª–∞ —è–∫ –∫–Ω–æ–ø–∫–∏ */
        .radio-tile-label {
            flex: 1;
            text-align: center;
            cursor: pointer;
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            padding: 10px;
            border-radius: 10px;
            font-size: 13px;
            font-weight: 600;
            color: #6b7280;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .radio-tile-label:hover {
            background: #f3f4f6;
        }

        /* –ö–æ–ª–∏ —Ä–∞–¥—ñ–æ –≤–∏–±—Ä–∞–Ω–æ */
        .radio-tiles input[type="radio"]:checked + .radio-tile-label {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            box-shadow: 0 4px 12px rgba(28, 201, 115, 0.3);
            transform: translateY(-2px);
        }

        /* –ö–Ω–æ–ø–∫–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É */
        .action-btn {
            width: 100%;
            margin-top: 30px;
            padding: 15px;
            background: linear-gradient(90deg, var(--secondary), var(--primary));
            color: white;
            font-size: 16px;
            font-weight: bold;
            border: none;
            border-radius: 14px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .action-btn:hover {
            box-shadow: 0 10px 20px rgba(28, 201, 115, 0.3);
            transform: translateY(-2px);
        }
        
        .action-btn:active { transform: scale(0.98); }
        
        /* –ö–Ω–æ–ø–∫–∏ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è (—Ç–∞–∫/–Ω—ñ) */
        .confirm-buttons { display: flex; gap: 10px; margin-top: 10px; }
        .btn-yes { background: #10b981; flex: 1; }
        .btn-no { background: #ef4444; flex: 1; }

        /* –†–µ–∑—É–ª—å—Ç–∞—Ç */
        .result-box {
            margin-top: 25px;
            background: #1f2937;
            border-radius: 12px;
            padding: 15px;
            color: #10b981;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            display: none; /* –ü—Ä–∏—Ö–æ–≤–∞–Ω–æ —Å–ø–æ—á–∞—Ç–∫—É */
        }
    </style>
</head>
<body id="main-body">

    <div id="menu-backdrop" onclick="toggleMenu()"></div>

    <div id="disclaimer-overlay">
        <div class="disclaimer-box">
            <h2 style="color: var(--text-main);">‚ö†Ô∏è –£–≤–∞–≥–∞!</h2>
            <p style="margin: 15px 0; color: #e91c1c;">–í—Å—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è, —Ä–æ–∑–º—ñ—â–µ–Ω–∞ –Ω–∞ –¥–∞–Ω–æ–º—É —Å–∞–π—Ç—ñ, –Ω–∞–¥–∞—î—Ç—å—Å—è –≤–∏–∫–ª—é—á–Ω–æ –∑ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–æ—é —Ç–∞ –æ–∑–Ω–∞–π–æ–º—á–æ—é –º–µ—Ç–æ—é. –ú–∞—Ç–µ—Ä—ñ–∞–ª–∏ —Å–∞–π—Ç—É –Ω–µ —î –º–µ–¥–∏—á–Ω–æ—é –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—î—é, –Ω–µ —î –¥—ñ–∞–≥–Ω–æ–∑–æ–º, –Ω–µ —î —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—î—é –¥–æ –ª—ñ–∫—É–≤–∞–Ω–Ω—è, –Ω–µ —î —ñ–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω–∏–º –ø–ª–∞–Ω–æ–º —Ö–∞—Ä—á—É–≤–∞–Ω–Ω—è —Ç–∞ –Ω–µ –º–æ–∂—É—Ç—å –∑–∞–º—ñ–Ω–∏—Ç–∏ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—é –ª—ñ–∫–∞—Ä—è, –¥—ñ—î—Ç–æ–ª–æ–≥–∞ –∞–±–æ —ñ–Ω—à–æ–≥–æ –∫–≤–∞–ª—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–æ–≥–æ —Å–ø–µ—Ü—ñ–∞–ª—ñ—Å—Ç–∞.</p>
            <p style="margin: 15px 0; color: #e91c1c;">–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ü—ñ—è —Å–∞–π—Ç—É –Ω–µ –Ω–µ—Å–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç—ñ –∑–∞ –±—É–¥—å-—è–∫—ñ –Ω–∞—Å–ª—ñ–¥–∫–∏, –ø—Ä—è–º—ñ –∞–±–æ –Ω–µ–ø—Ä—è–º—ñ, —â–æ –º–æ–∂—É—Ç—å –≤–∏–Ω–∏–∫–Ω—É—Ç–∏ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –∑ —Ü—å–æ–≥–æ —Å–∞–π—Ç—É, –≤–∫–ª—é—á–Ω–æ (–∞–ª–µ –Ω–µ –æ–±–º–µ–∂—É—é—á–∏—Å—å): –∑–º—ñ–Ω–∞–º–∏ —Å—Ç–∞–Ω—É –∑–¥–æ—Ä–æ–≤‚Äô—è, –ø–æ–≥—ñ—Ä—à–µ–Ω–Ω—è–º —Å–∞–º–æ–ø–æ—á—É—Ç—Ç—è, –∞–ª–µ—Ä–≥—ñ—á–Ω–∏–º–∏ —Ä–µ–∞–∫—Ü—ñ—è–º–∏, –≥–æ—Ä–º–æ–Ω–∞–ª—å–Ω–∏–º–∏ –ø–æ—Ä—É—à–µ–Ω–Ω—è–º–∏, –ø—Ä–æ–±–ª–µ–º–∞–º–∏ –∑ —Ç—Ä–∞–≤–ª–µ–Ω–Ω—è–º –∞–±–æ —ñ–Ω—à–∏–º–∏ —Ñ—ñ–∑–∏—á–Ω–∏–º–∏ —á–∏ –ø—Å–∏—Ö–æ–ª–æ–≥—ñ—á–Ω–∏–º–∏ –Ω–∞—Å–ª—ñ–¥–∫–∞–º–∏.</p>
            <button class="disclaimer-btn" onclick="closeDisclaimer()">–Ø –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—é —É—Å–µ</button>
        </div>
    </div>

    <div id="side-menu">
        <a onclick="switchPage('home')" class="side-nav-item active" id="nav-home">–ì–æ–ª–æ–≤–Ω–∞</a>
        <a onclick="switchPage('features')" class="side-nav-item" id="nav-features">–ü–µ—Ä–µ–≤–∞–≥–∏</a>
        <a onclick="switchPage('recipes')" class="side-nav-item" id="nav-recipes">–†–µ—Ü–µ–ø—Ç–∏</a>
        <a onclick="switchPage('calc')" class="side-nav-item" id="nav-calc">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</a>
        
        <a id="admin-menu-btn" class="side-nav-item admin-link">‚öôÔ∏è –ê–¥–º—ñ–Ω</a>
    </div>

    <header>
        <div class="container flex-between">
            <div class="logo" onclick="switchPage('home')">FastDiet</div>

            <div class="hamburger-btn" onclick="toggleMenu()" id="hamburger-icon">
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
            </div>
            
            </div>
    </header>

    <main id="content-area">
        <section id="page-home" class="page-section active">
            <div class="container">
                <div class="hero">
                    <h1 class="editable-text">–ó–¥–æ—Ä–æ–≤–µ —Ö–∞—Ä—á—É–≤–∞–Ω–Ω—è</h1>
                    <p class="editable-text">–í–∞—à —à–ª—è—Ö –¥–æ —ñ–¥–µ–∞–ª—å–Ω–æ—ó —Ñ–æ—Ä–º–∏.</p>
                </div>
            </div>
        </section>

        <section id="page-features" class="page-section">
            <div class="container">
                <h2 style="color: white; text-align: center;" class="editable-text">–ü–µ—Ä–µ–≤–∞–≥–∏</h2>
                <div class="grid-3">
                    <div class="card" style="--card-color-top: #11998e; --card-color-bot: #38ef7d;">
                        <img src="https://source.unsplash.com/300x200/?nature" class="card-image" alt="Img">
                        <div class="card-content">
                            <h2 class="editable-text">üåø –ï–∫–æ</h2>
                            <p class="editable-text">100% –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–æ.</p>
                        </div>
                    </div>
                    <div class="card" style="--card-color-top: #ff9966; --card-color-bot: #ff5e62;">
                         <img src="https://source.unsplash.com/300x200/?fast" class="card-image" alt="Img">
                         <div class="card-content">
                            <h2 class="editable-text">‚ö° –®–≤–∏–¥–∫–æ</h2>
                            <p class="editable-text">–î–æ—Å—Ç–∞–≤–∫–∞ –∑–∞ 30 —Ö–≤.</p>
                         </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="page-recipes" class="page-section">
            <div class="container">
                <h2 style="color: white; text-align: center;" class="editable-text">–ú–µ–Ω—é</h2>
                <div class="grid-3">
                    <div class="card">
                        <img src="https://source.unsplash.com/400x300/?salad" class="card-image" alt="Img">
                        <div class="card-content">
                            <h2 class="editable-text">–°–∞–ª–∞—Ç –¶–µ–∑–∞—Ä</h2>
                            <p class="editable-text">–ö–ª–∞—Å–∏—á–Ω–∏–π —Ä–µ—Ü–µ–ø—Ç.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="page-calc" class="page-section">
            <div class="calc-wrapper">
                <div class="compact-form">
                    <h1>–í–∞—à—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏</h1>

                    <div class="row-3-cols">
                        <div class="input-group">
                            <label class="input-label">–í—ñ–∫</label>
                            <input id="age" type="number" placeholder="25">
                        </div>
                        <div class="input-group">
                            <label class="input-label">–ó—Ä—ñ—Å—Ç (—Å–º)</label>
                            <input id="height" type="number" placeholder="175">
                        </div>
                        <div class="input-group">
                            <label class="input-label">–í–∞–≥–∞ (–∫–≥)</label>
                            <input id="weight" type="number" placeholder="70">
                        </div>
                    </div>

                    <div class="input-group">
                        <label class="input-label">–ê–ª–µ—Ä–≥—ñ—ó (–Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–æ)</label>
                        <input id="allergy" type="text" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: –≥–æ—Ä—ñ—Ö–∏, –º–µ–¥">
                    </div>
                    
                    <div class="input-group">
                        <label class="input-label">–ó–¥–æ—Ä–æ–≤'—è</label>
                        <input id="health" type="text" placeholder="–ù—é–∞–Ω—Å–∏, —Ç—Ä–∞–≤–º–∏...">
                    </div>

                    <p class="radio-section-title">–°—Ç–∞—Ç—å:</p>
                    <div class="radio-tiles">
                        <label>
                            <input type="radio" name="gender" value="male" checked>
                            <div class="radio-tile-label">–ß–æ–ª–æ–≤—ñ–∫</div>
                        </label>
                        <label>
                            <input type="radio" name="gender" value="female">
                            <div class="radio-tile-label">–ñ—ñ–Ω–∫–∞</div>
                        </label>
                    </div>

                    <p class="radio-section-title">–ê–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å:</p>
                    <div class="radio-tiles">
                        <label>
                            <input type="radio" name="activity" value="low">
                            <div class="radio-tile-label">–ù–∏–∑—å–∫–∞</div>
                        </label>
                        <label>
                            <input type="radio" name="activity" value="small">
                            <div class="radio-tile-label">–ú–∞–ª–∞</div>
                        </label>
                        <label>
                            <input type="radio" name="activity" value="medium" checked>
                            <div class="radio-tile-label">–°–µ—Ä–µ–¥–Ω—è</div>
                        </label>
                        <label>
                            <input type="radio" name="activity" value="high">
                            <div class="radio-tile-label">–í–∏—Å–æ–∫–∞</div>
                        </label>
                         <label>
                            <input type="radio" name="activity" value="very_high">
                            <div class="radio-tile-label">–°–ø–æ—Ä—Ç—Å–º–µ–Ω</div>
                        </label>
                    </div>

                    <button id="showBtn" class="action-btn" onclick="showData()">–†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏</button>

                    <div class="confirm-buttons">
                        <button id="correctBtn" class="action-btn btn-yes" style="display:none; margin-top:10px" onclick="clearResult(); showData();">–î–∞–Ω—ñ –≤—ñ—Ä–Ω—ñ</button>
                        <button id="wrongBtn" class="action-btn btn-no" style="display:none; margin-top:10px" onclick="reTry()">–ü–æ–º–∏–ª–∫–∞</button>
                    </div>

                    <div id="resultArea" class="result-box">
                        <pre id="result"></pre>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p class="editable-text">&copy; 2025 DietPro.</p>
    </footer>

    <div id="admin-panel">
        <h3>‚öôÔ∏è –ü–∞–Ω–µ–ª—å –ö–µ—Ä—É–≤–∞–Ω–Ω—è</h3>
        
        <div class="admin-row">
            <button class="btn-history" id="btn-undo" title="Undo">‚¨ÖÔ∏è</button>
            <button class="btn-history" id="btn-redo" title="Redo">‚û°Ô∏è</button>
        </div>

        <div id="site-style-controls">
            <label style="color: #3498db;">üé® –°—Ç–∏–ª—ñ –°–∞–π—Ç—É</label>
            
            <label>–ö–æ–ª—ñ—Ä –≥—Ä–∞–¥—ñ—î–Ω—Ç—É (–í–µ—Ä—Ö / –ù–∏–∑):</label>
            <div class="admin-row">
                <input type="color" id="site-color-top" value="#4287f5">
                <input type="color" id="site-color-bot" value="#1cc973">
            </div>

            <label>–ö—É—Ç –≥—Ä–∞–¥—ñ—î–Ω—Ç—É (deg):</label>
            <input type="number" id="site-gradient-angle" value="135" min="0" max="360" step="5">
        </div>

        <label>–°—Ç–≤–æ—Ä–µ–Ω–Ω—è</label>
        <button class="btn-tool" id="add-card-struct">üìÑ + –ö–∞—Ä—Ç–∫–∞ (–≤ —Å—ñ—Ç–∫—É)</button>
        <button class="btn-tool" id="add-float-text">üí¨ + –¢–µ–∫—Å—Ç (–ø–ª–∞–≤—É—á–∏–π)</button>
        <button class="btn-tool" id="add-float-img">üñºÔ∏è + –ö–∞—Ä—Ç–∏–Ω–∫–∞ (–ø–ª–∞–≤—É—á–∞)</button>
        <button class="btn-tool" id="add-hero-banner">üì¢ + –ë–∞–Ω–µ—Ä (Hero)</button>

        <div id="style-controls">
            <label style="color: #f1c40f;">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–æ—Ä –í–∏–±—Ä–∞–Ω–æ–≥–æ</label>

            <label>–†–æ–∑–º—ñ—Ä —à—Ä–∏—Ñ—Ç—É (px):</label>
            <input type="number" id="font-size-input" value="16">

            <label>–®—Ä–∏—Ñ—Ç:</label>
            <select id="font-select"></select>

            <label>–ö–æ–ª—ñ—Ä —Ç–µ–∫—Å—Ç—É:</label>
            <input type="color" id="color-text">
            
            <label>–§–æ–Ω –µ–ª–µ–º–µ–Ω—Ç–∞:</label>
            <div style="display: flex; gap: 5px;">
                <input type="color" id="color-bg" value="#ffffff">
                <button class="btn-tool" style="width: auto; margin: 5px 0 0;" id="btn-no-bg">–ü—Ä–æ–∑–æ—Ä–∏–π</button>
            </div>

            <div id="card-style-controls">
                <label style="color: #9b59b6;">‚ú® –ì—Ä–∞–¥—ñ—î–Ω—Ç –ö–∞—Ä—Ç–∫–∏</label>

                <label>–í–µ—Ä—Ö–Ω—ñ–π –∫–æ–ª—ñ—Ä:</label>
                <input type="color" id="card-color-top" value="#667eea">

                <label>–ù–∏–∂–Ω—ñ–π –∫–æ–ª—ñ—Ä:</label>
                <input type="color" id="card-color-bot" value="#764ba2">
                
                <label style="margin-top: 15px;">üñºÔ∏è –ö–∞—Ä—Ç–∏–Ω–∫–∞ (URL):</label>
                <input type="text" id="card-img-url" placeholder="–í—Å—Ç–∞–≤—Ç–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Ñ–æ—Ç–æ...">
            </div>

            <div id="hero-style-controls">
                <label style="color: #e74c3c;">üî• –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ë–∞–Ω–µ—Ä–∞</label>
                
                <label>–ì—Ä–∞–¥—ñ—î–Ω—Ç –§–æ–Ω—É (–õ—ñ–≤–æ / –ü—Ä–∞–≤–æ):</label>
                <div class="admin-row">
                    <input type="color" id="hero-grad-top" value="#42a5f5">
                    <input type="color" id="hero-grad-bot" value="#26a69a">
                </div>

                <label>üñºÔ∏è –í—Å—Ç–∞–≤–∏—Ç–∏ –∫–∞—Ä—Ç–∏–Ω–∫—É –∑–≤–µ—Ä—Ö—É (URL):</label>
                <input type="text" id="hero-img-url" placeholder="https://...">
                <small style="color: #7f8c8d; display:block; margin-top:5px;">–ó–∞–ª–∏—à—Ç–µ –ø–æ—Ä–æ–∂–Ω—ñ–º, —â–æ–± –ø—Ä–∏–±—Ä–∞—Ç–∏.</small>
            </div>

            <button class="btn-tool" style="background: #c0392b; margin-top: 20px;" id="btn-delete">üóëÔ∏è –í–∏–¥–∞–ª–∏—Ç–∏ –µ–ª–µ–º–µ–Ω—Ç</button>
        </div>

        <button class="btn-tool" style="background: #7f8c8d; margin-top: 30px;" id="btn-close-admin">–ó–∞–∫—Ä–∏—Ç–∏</button>
    </div>

    <script>
        // --- –ù–û–í–ê –§–£–ù–ö–¶–Ü–Ø –ú–ï–ù–Æ ---
        function toggleMenu() {
            const menu = document.getElementById('side-menu');
            const backdrop = document.getElementById('menu-backdrop');
            const icon = document.getElementById('hamburger-icon');
            
            menu.classList.toggle('active');
            backdrop.classList.toggle('active');
            icon.classList.toggle('menu-open');
        }

        // --- 0. –î–ò–°–ö–õ–ï–ô–ú–ï–† ---
        function closeDisclaimer() {
            const overlay = document.getElementById('disclaimer-overlay');
            overlay.style.opacity = '0';
            setTimeout(() => {
                overlay.style.display = 'none';
            }, 500);
        }

        // --- 1. –Ü–°–¢–û–†–Ü–Ø (UNDO/REDO) ---
        const historyStack = [];
        let historyIndex = -1;
        const maxHistory = 30;

        function saveState() {
            if (!isAdmin) return; 
            const content = document.getElementById('content-area').innerHTML;
            
            const rootStyle = getComputedStyle(document.documentElement);
            const siteStyles = {
                '--site-gradient-angle': rootStyle.getPropertyValue('--site-gradient-angle') || '135deg',
                '--site-color-top': rootStyle.getPropertyValue('--site-color-top') || 'rgb(66, 135, 245)',
                '--site-color-bot': rootStyle.getPropertyValue('--site-color-bot') || 'rgb(28, 201, 115)',
            };

            const state = { content, siteStyles };
            
            if (historyIndex < historyStack.length - 1) {
                historyStack.splice(historyIndex + 1);
            }
            
            historyStack.push(state);
            if (historyStack.length > maxHistory) historyStack.shift();
            else historyIndex++;

            updateHistoryButtons();
        }

        function restoreState(index) {
            if (index >= 0 && index < historyStack.length) {
                const state = historyStack[index];
                document.getElementById('content-area').innerHTML = state.content;
                
                for (const [key, value] of Object.entries(state.siteStyles)) {
                    document.documentElement.style.setProperty(key, value);
                }
                updateSiteGradient();
                updateSiteControls();
                
                historyIndex = index;
                deselect(); 
                updateHistoryButtons();
            }
        }

        function undo() { if (historyIndex > 0) restoreState(historyIndex - 1); }
        function redo() { if (historyIndex < historyStack.length - 1) restoreState(historyIndex + 1); }

        function updateHistoryButtons() {
            document.getElementById('btn-undo').disabled = historyIndex <= 0;
            document.getElementById('btn-redo').disabled = historyIndex >= historyStack.length - 1;
        }
        
        document.addEventListener('keydown', (e) => {
            if (isAdmin) {
                if (e.ctrlKey && e.key === 'z') { e.preventDefault(); undo(); }
                if (e.ctrlKey && e.key === 'y') { e.preventDefault(); redo(); }
            }
        });

        // --- 2. –ó–ú–Ü–ù–ù–Ü –°–¢–ê–ù–£ ---
        let isAdmin = false;
        let selectedElement = null;
        let isDragging = false;
        let isResizing = false;
        let startX, startY, startLeft, startTop, startWidth, startHeight;

        // --- 3. –ê–î–ú–Ü–ù –ü–ê–ù–ï–õ–¨ ---
        
        document.getElementById('admin-menu-btn').onclick = () => {
            toggleMenu();
            setTimeout(() => {
                const pass = prompt("–ü–∞—Ä–æ–ª—å:", "Admin_GPT");
                if (pass === "Admin_GPT") toggleAdmin(true);
                else alert("–ù–µ–≤—ñ—Ä–Ω–∏–π –ø–∞—Ä–æ–ª—å");
            }, 100);
        };

        document.getElementById('btn-close-admin').onclick = () => toggleAdmin(false);

        function toggleAdmin(active) {
            isAdmin = active;
            const panel = document.getElementById('admin-panel');
            if (active) {
                panel.classList.add('active');
                updateSiteControls();
                if (historyStack.length === 0) saveState();
            } else {
                panel.classList.remove('active');
                deselect();
            }
        }

        // --- –§–û–ù –°–ê–ô–¢–£ ---
        function updateSiteGradient() {
            const top = document.getElementById('site-color-top').value;
            const bot = document.getElementById('site-color-bot').value;
            const angle = document.getElementById('site-gradient-angle').value;
            
            document.documentElement.style.setProperty('--site-color-top', top);
            document.documentElement.style.setProperty('--site-color-bot', bot);
            document.documentElement.style.setProperty('--site-gradient-angle', angle + 'deg');

            document.documentElement.style.setProperty('--site-gradient', `linear-gradient(${angle}deg, ${top}, ${bot})`);
        }

        function updateSiteControls() {
            const rootStyle = document.documentElement.style;
            const top = rootStyle.getPropertyValue('--site-color-top') || getComputedStyle(document.documentElement).getPropertyValue('--secondary');
            const bot = rootStyle.getPropertyValue('--site-color-bot') || getComputedStyle(document.documentElement).getPropertyValue('--primary');
            const angle = parseInt(rootStyle.getPropertyValue('--site-gradient-angle') || '135');

            document.getElementById('site-color-top').value = rgbToHex(top);
            document.getElementById('site-color-bot').value = rgbToHex(bot);
            document.getElementById('site-gradient-angle').value = angle;
        }

        document.getElementById('site-color-top').oninput = updateSiteGradient;
        document.getElementById('site-color-bot').oninput = updateSiteGradient;
        document.getElementById('site-gradient-angle').oninput = updateSiteGradient;
        
        document.getElementById('site-color-top').onchange = saveState;
        document.getElementById('site-color-bot').onchange = saveState;
        document.getElementById('site-gradient-angle').onchange = saveState;


        // --- 4. –°–¢–í–û–†–ï–ù–ù–Ø –ï–õ–ï–ú–ï–ù–¢–Ü–í ---
        document.getElementById('add-card-struct').onclick = () => {
            const activeSection = document.querySelector('.page-section.active');
            let grid = activeSection.querySelector('.grid-3');
            if (!grid) {
                grid = document.createElement('div');
                grid.className = 'grid-3';
                activeSection.querySelector('.container').appendChild(grid);
            }
            // –°–¢–í–û–†–ï–ù–ù–Ø –ù–û–í–û–á –°–¢–†–£–ö–¢–£–†–ò –ö–ê–†–¢–ö–ò
            const card = document.createElement('div');
            card.className = 'card';
            card.style.setProperty('--card-color-top', '#667eea');
            card.style.setProperty('--card-color-bot', '#764ba2');
            
            card.innerHTML = `
                <img src="https://images.unsplash.com/photo-1579546929518-9e396f3cc809?w=500&auto=format&fit=crop" class="card-image" alt="New">
                <div class="card-content">
                    <h2 class="editable-text">–ó–∞–≥–æ–ª–æ–≤–æ–∫</h2>
                    <p class="editable-text">–í–∞—à –æ–ø–∏—Å —Ç—É—Ç.</p>
                </div>
            `;
            grid.appendChild(card);
            saveState();
        };

        document.getElementById('add-float-text').onclick = () => createMovableElement('text', '–í–∞—à —Ç–µ–∫—Å—Ç');
        document.getElementById('add-float-img').onclick = () => {
            const url = prompt("URL –∫–∞—Ä—Ç–∏–Ω–∫–∏:", "https://source.unsplash.com/300x200/?dessert");
            if(url) createMovableElement('img', url);
        };
        
        document.getElementById('add-hero-banner').onclick = () => {
            createMovableElement('hero', '');
        };

        function createMovableElement(type, content) {
            const container = document.querySelector('.page-section.active .container');
            const box = document.createElement('div');
            box.className = 'movable-box';
            box.style.left = '50px'; box.style.top = '50px';
            
            const inner = document.createElement('div');
            inner.className = 'movable-content';

            if (type === 'text') {
                inner.innerText = content;
                inner.style.padding = '10px';
                inner.style.background = 'white';
                inner.classList.add('editable-text');
                box.style.width = '200px';
            } else if (type === 'img') {
                const img = document.createElement('img');
                img.src = content;
                inner.appendChild(img);
                box.style.width = '300px'; box.style.height = '200px';
            } else if (type === 'hero') {
                box.style.width = '100%'; 
                box.style.maxWidth = '800px';
                box.style.height = '200px';
                inner.classList.add('hero-banner-style'); 
                inner.innerHTML = `
                    <img src="" class="hero-banner-img" style="display: none;">
                    <h2 class="editable-text">–ó–¥–æ—Ä–æ–≤–µ —Ö–∞—Ä—á—É–≤–∞–Ω–Ω—è</h2>
                    <p class="editable-text">–í–∞—à —à–ª—è—Ö –¥–æ —ñ–¥–µ–∞–ª—å–Ω–æ—ó —Ñ–æ—Ä–º–∏.</p>
                `;
            }

            const handle = document.createElement('div');
            handle.className = 'resize-handle';

            box.appendChild(inner);
            box.appendChild(handle);
            container.appendChild(box);
            
            selectElement(box);
            saveState();
        }

        // --- 5. –í–ó–ê–Ñ–ú–û–î–Ü–Ø ---
        document.addEventListener('mousedown', (e) => {
            if (!isAdmin) return;
            const target = e.target;
            if (target.closest('#admin-panel') || target.closest('header') || target.closest('#side-menu')) return;

            if (target.classList.contains('resize-handle')) {
                e.preventDefault(); e.stopPropagation();
                isResizing = true;
                selectedElement = target.parentElement;
                startX = e.clientX; startY = e.clientY;
                startWidth = selectedElement.offsetWidth;
                startHeight = selectedElement.offsetHeight;
                return;
            }

            const box = target.closest('.movable-box');
            if (box) {
                if (target.classList.contains('editable-text')) {
                    selectElement(target);
                    target.contentEditable = "true";
                    target.focus();
                    return; 
                }
                e.preventDefault();
                selectElement(box);
                isDragging = true;
                startX = e.clientX; startY = e.clientY;
                startLeft = box.offsetLeft; startTop = box.offsetTop;
                return;
            }

            if (target.classList.contains('editable-text')) {
                selectElement(target);
                target.contentEditable = "true";
                return;
            }
            const card = target.closest('.card');
            if (card) {
               selectElement(card);
               return; 
            }
            
            deselect();
        });

        document.addEventListener('mousemove', (e) => {
            if (!isAdmin) return;
            if (isDragging && selectedElement) {
                const dx = e.clientX - startX;
                const dy = e.clientY - startY;
                selectedElement.style.left = (startLeft + dx) + 'px';
                selectedElement.style.top = (startTop + dy) + 'px';
            }
            if (isResizing && selectedElement) {
                const dx = e.clientX - startX;
                const dy = e.clientY - startY;
                selectedElement.style.width = (startWidth + dx) + 'px';
                selectedElement.style.height = (startHeight + dy) + 'px';
            }
        });

        document.addEventListener('mouseup', () => {
            if (isDragging || isResizing) {
                isDragging = false; isResizing = false;
                saveState();
            }
        });

        document.addEventListener('focusout', (e) => {
            if (isAdmin && e.target.isContentEditable) {
                saveState();
            }
        });

        // --- 6. –°–¢–ò–õ–Ü –¢–ê –õ–û–ì–Ü–ö–ê –ê–î–ú–Ü–ù–ö–ò ---
        function selectElement(el) {
            if(selectedElement && selectedElement !== el) deselect();
            selectedElement = el;
            
            document.querySelectorAll('.selected-element, .selected-text').forEach(e => {
                 e.classList.remove('selected-element');
                 e.classList.remove('selected-text');
            });

            if (el.classList.contains('movable-box') || el.classList.contains('card')) el.classList.add('selected-element');
            else el.classList.add('selected-text');

            document.getElementById('style-controls').classList.add('active');
            
            // –ü—Ä–∏—Ö–æ–≤—É—î–º–æ –≤—Å—ñ —Å–ø–µ—Ü-–ø–∞–Ω–µ–ª—ñ
            document.getElementById('card-style-controls').style.display = 'none';
            document.getElementById('hero-style-controls').style.display = 'none';

            const target = el.classList.contains('movable-box') 
                ? el.querySelector('.movable-content') 
                : el;
            
            // –ë–∞–∑–æ–≤—ñ —Å—Ç–∏–ª—ñ
            const compStyle = window.getComputedStyle(target);
            document.getElementById('color-text').value = rgbToHex(compStyle.color);
            document.getElementById('color-bg').value = rgbToHex(compStyle.backgroundColor);
            document.getElementById('font-size-input').value = parseInt(compStyle.fontSize) || 16;
            
            // 1. –Ø–∫—â–æ –≤–∏–±—Ä–∞–Ω–∞ –ö–ê–†–¢–ö–ê
            if (el.classList.contains('card')) {
                document.getElementById('card-style-controls').style.display = 'block';
                const topVal = el.style.getPropertyValue('--card-color-top') || '#667eea';
                const botVal = el.style.getPropertyValue('--card-color-bot') || '#764ba2';
                
                document.getElementById('card-color-top').value = rgbToHex(topVal.trim());
                document.getElementById('card-color-bot').value = rgbToHex(botVal.trim());

                const img = el.querySelector('img');
                if(img) document.getElementById('card-img-url').value = img.src;
            }

            // 2. –Ø–∫—â–æ –≤–∏–±—Ä–∞–Ω–∏–π HERO BANNER
            if (el.classList.contains('movable-box') && el.querySelector('.hero-banner-style')) {
                document.getElementById('hero-style-controls').style.display = 'block';
                const heroInner = el.querySelector('.hero-banner-style');
                
                // –û—Ç—Ä–∏–º—É—î–º–æ –ø–æ—Ç–æ—á–Ω—ñ –≥—Ä–∞–¥—ñ—î–Ω—Ç–∏ (—á–µ—Ä–µ–∑ –∑–º—ñ–Ω–Ω—ñ –∞–±–æ –¥–µ—Ñ–æ–ª—Ç)
                const hTop = heroInner.style.getPropertyValue('--hero-bg-top') || '#42a5f5';
                const hBot = heroInner.style.getPropertyValue('--hero-bg-bot') || '#26a69a';
                
                document.getElementById('hero-grad-top').value = rgbToHex(hTop.trim());
                document.getElementById('hero-grad-bot').value = rgbToHex(hBot.trim());

                // URL –ö–∞—Ä—Ç–∏–Ω–∫–∏ –∑–≤–µ—Ä—Ö—É
                const heroImg = heroInner.querySelector('.hero-banner-img');
                if (heroImg && heroImg.src && heroImg.style.display !== 'none') {
                    document.getElementById('hero-img-url').value = heroImg.src;
                } else {
                    document.getElementById('hero-img-url').value = '';
                }
            }
        }

        function deselect() {
            if (selectedElement) {
                selectedElement.classList.remove('selected-element');
                selectedElement.classList.remove('selected-text');
                if (selectedElement.isContentEditable) selectedElement.contentEditable = "false";
                selectedElement = null;
                document.getElementById('style-controls').classList.remove('active');
            }
        }

        function applyStyle(prop, val) {
            if (!selectedElement) return;
            const target = selectedElement.classList.contains('movable-box') 
                ? selectedElement.querySelector('.movable-content') 
                : selectedElement;
            target.style[prop] = val;
            saveState();
        }

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö (Card –∞–±–æ Hero)
        function updateCSSVar(selector, varName, val) {
            // selector - —Ü–µ –µ–ª–µ–º–µ–Ω—Ç, –¥–æ —è–∫–æ–≥–æ –∑–∞—Å—Ç–æ—Å–æ–≤—É—î–º–æ
            if (!selector) return;
            selector.style.setProperty(varName, val);
            saveState();
        }

        // –û–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ–π
        document.getElementById('color-text').oninput = (e) => applyStyle('color', e.target.value);
        document.getElementById('color-bg').oninput = (e) => applyStyle('backgroundColor', e.target.value);
        document.getElementById('btn-no-bg').onclick = () => {
            document.getElementById('color-bg').value = '#000000';
            applyStyle('backgroundColor', 'transparent');
        }
        document.getElementById('font-size-input').onchange = (e) => applyStyle('fontSize', e.target.value + 'px');
        document.getElementById('font-select').onchange = (e) => applyStyle('fontFamily', e.target.value);
        
        // --- –ö–ê–†–¢–ö–ò ---
        document.getElementById('card-color-top').oninput = (e) => updateCSSVar(selectedElement, '--card-color-top', e.target.value);
        document.getElementById('card-color-bot').oninput = (e) => updateCSSVar(selectedElement, '--card-color-bot', e.target.value);
        document.getElementById('card-img-url').oninput = (e) => {
            if (!selectedElement || !selectedElement.classList.contains('card')) return;
            const img = selectedElement.querySelector('img');
            if(img && e.target.value.trim() !== "") {
                img.src = e.target.value;
                saveState();
            }
        };

        // --- HERO BANNER ---
        document.getElementById('hero-grad-top').oninput = (e) => {
            const inner = selectedElement.querySelector('.hero-banner-style');
            updateCSSVar(inner, '--hero-bg-top', e.target.value);
        };
        document.getElementById('hero-grad-bot').oninput = (e) => {
            const inner = selectedElement.querySelector('.hero-banner-style');
            updateCSSVar(inner, '--hero-bg-bot', e.target.value);
        };
        document.getElementById('hero-img-url').oninput = (e) => {
            const inner = selectedElement.querySelector('.hero-banner-style');
            if (!inner) return;
            let img = inner.querySelector('.hero-banner-img');
            
            if (e.target.value.trim() !== "") {
                img.src = e.target.value;
                img.style.display = 'block';
            } else {
                img.style.display = 'none';
            }
            saveState();
        };


        document.getElementById('btn-delete').onclick = () => {
            if (selectedElement && confirm("–í–∏–¥–∞–ª–∏—Ç–∏?")) {
                selectedElement.remove();
                deselect();
                saveState();
            }
        };

        document.getElementById('btn-undo').onclick = undo;
        document.getElementById('btn-redo').onclick = redo;

        // --- 7. –î–û–ü–û–ú–Ü–ñ–ù–Ü ---
        function initFonts() {
            const fonts = [
          "Montserrat", "Roboto", "Open Sans", "Oswald", "Pacifico",
          "Lobster", "Comfortaa", "Arial", "Helvetica",
          "Times New Roman", "Courier New", "Georgia",
          "Play", "Merriweather", "Amatic SC",
          "Lucida Sans Unicode", "Segoe UI",
          // —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω—ñ
          "Inter", "Poppins", "Lato", "Nunito", "Raleway",
          "Ubuntu", "DM Sans", "Manrope",
          // –∑–∞–≥–æ–ª–æ–≤–∫–∏
          "Bebas Neue", "Anton", "Playfair Display", "Cinzel",
          // –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ñ
          "Dancing Script", "Great Vibes", "Indie Flower",
          // –º–æ–Ω–æ
          "JetBrains Mono", "Fira Code",
          // —Å–∏—Å—Ç–µ–º–Ω—ñ
          "Verdana", "Tahoma", "Calibri", "Consolas"];
            const sel = document.getElementById('font-select');
            fonts.forEach(f => {
                const opt = document.createElement('option');
                opt.value = f; opt.innerText = f;
                sel.appendChild(opt);
            });
        }
        initFonts();

        function rgbToHex(rgb) {
            if(!rgb || rgb.includes('rgba(0, 0, 0, 0)') || rgb === 'transparent') return "#ffffff";
            if(rgb.startsWith('#')) return rgb;
            let sep = rgb.indexOf(",") > -1 ? "," : " ";
            let rgbArr = rgb.substr(4).split(")")[0].split(sep);
            if (rgbArr.length === 4) rgbArr.pop();
            let r = (+rgbArr[0]).toString(16), g = (+rgbArr[1]).toString(16), b = (+rgbArr[2]).toString(16);
            if(r.length==1)r="0"+r; if(g.length==1)g="0"+g; if(b.length==1)b="0"+b;
            return "#" + r + g + b;
        }

        window.switchPage = function(pageId) {
            document.querySelectorAll('.page-section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.side-nav-item').forEach(n => n.classList.remove('active')); 
            document.getElementById('page-'+pageId).classList.add('active');
            document.getElementById('nav-'+pageId).classList.add('active');
            
            const menu = document.getElementById('side-menu');
            if (menu.classList.contains('active')) toggleMenu();

            deselect(); 
        }
        
        document.documentElement.style.setProperty('--site-color-top', document.getElementById('site-color-top').value);
        document.documentElement.style.setProperty('--site-color-bot', document.getElementById('site-color-bot').value);
        document.documentElement.style.setProperty('--site-gradient-angle', document.getElementById('site-gradient-angle').value + 'deg');
        updateSiteGradient();

        let ReTryBut = 0;
      function clearResult(){document.getElementById('result').innerText='';document.getElementById('correctBtn').style.display='none'}
      function reTry(){ReTryBut=0;document.getElementById('result').innerText='';document.getElementById('wrongBtn').style.display='none';document.getElementById('correctBtn').style.display='none';document.getElementById('resultArea').style.display = 'none';}

      function IMT(){
        const height = Number(document.getElementById('height').value);
        const weight = Number(document.getElementById('weight').value);
        if(!height||!weight) return NaN;
        return Number((weight/((height/100)**2)).toFixed(2));
      }

      function IMT_Interpretation(imt_value){
        if(!isFinite(imt_value)) return '–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö –¥–ª—è —ñ–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü—ñ—ó';
        if(imt_value<16) return '–í–∏—Ä–∞–∂–µ–Ω–∏–π –¥–µ—Ñ—ñ—Ü–∏—Ç –º–∞—Å–∏ —Ç—ñ–ª–∞';
        if(imt_value<18.5) return '–ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—è (–¥–µ—Ñ—ñ—Ü–∏—Ç) –º–∞—Å–∞ —Ç—ñ–ª–∞';
        if(imt_value<25) return '–ù–æ—Ä–º–∞–ª—å–Ω–∞ –º–∞—Å–∞ —Ç—ñ–ª–∞';
        if(imt_value<30) return '–ù–∞–¥–º—ñ—Ä–Ω–∞ –º–∞—Å–∞ —Ç—ñ–ª–∞ (–ø—Ä–µ–¥–æ–∂–∏—Ä—ñ–Ω–Ω—è)';
        if(imt_value<35) return '–û–∂–∏—Ä—ñ–Ω–Ω—è I —Å—Ç—É–ø–µ–Ω—è';
        if(imt_value<40) return '–û–∂–∏—Ä—ñ–Ω–Ω—è II —Å—Ç—É–ø–µ–Ω—è';
        return '–û–∂–∏—Ä—ñ–Ω–Ω—è III —Å—Ç—É–ø–µ–Ω—è';
      }

      function BMR(age,height,weight,gender,activity){
        age=Number(age);height=Number(height);weight=Number(weight);
        const multipliers={very_high:1.9,high:1.725,medium:1.55,small:1.375,low:1.2};
        let bmr = (10*weight)+(6.25*height)-(5*age)+(gender==='male'?5:-161);
        return bmr*(multipliers[activity]??1.55);
      }

      function proteins(activity,weight){const m={very_high:2,high:1.8,medium:1.4,small:1.2,low:0.8}; return Number(weight)*(m[activity]??1.4)}
      function fat(brm_last){return (0.3*brm_last)/9}
      function carb(brm_last){return (0.4*brm_last)/4}

      function vitamins(age,gender,weight,activity){
        age=Number(age);weight=Number(weight);
        const multipliers={very_high:1.4,high:1.2,medium:1.1,small:1,low:0.8};
        const vitaminRDA={Vitamin_C:90,Vitamin_D:800,Vitamin_A:700,Vitamin_B1:1.1,Vitamin_B6:1.3,Vitamin_B12:2.4};
        const genderFactor={male:1,female:0.9};
        let ageFactor = age<=3?0.8:age<=8?0.9:age<=13?1:age<=18?1.1:age<=50?1:1.2;
        const activityMultiplier = multipliers[activity] ?? 1.1;
        const gFactor = genderFactor[gender] ?? 1;
        const weightFactor = (weight>0)?(weight/70):1;
        return {
          Vitamin_D: vitaminRDA.Vitamin_D * ageFactor * gFactor * activityMultiplier * weightFactor,
          Vitamin_C: vitaminRDA.Vitamin_C * ageFactor * gFactor * activityMultiplier * weightFactor,
          Vitamin_B12: vitaminRDA.Vitamin_B12 * ageFactor * gFactor * activityMultiplier * weightFactor,
          Vitamin_A: vitaminRDA.Vitamin_A * ageFactor * gFactor * activityMultiplier * weightFactor,
          Vitamin_B1: vitaminRDA.Vitamin_B1 * ageFactor * gFactor * activityMultiplier * weightFactor,
          Vitamin_B6: vitaminRDA.Vitamin_B6 * ageFactor * gFactor * activityMultiplier * weightFactor
        };
      }

      function showData(){
        const ageRaw = document.getElementById('age').value;
        const heightRaw = document.getElementById('height').value;
        const weightRaw = document.getElementById('weight').value;
        const age = Number(ageRaw), height = Number(heightRaw), weight = Number(weightRaw);
        const gender = document.querySelector('input[name="gender"]:checked')?.value || 'male';
        const activity = document.querySelector('input[name="activity"]:checked')?.value || 'medium';
        document.getElementById('resultArea').style.display = 'block';
        let output = '';
        if(!ageRaw||!heightRaw||!weightRaw){document.getElementById('result').innerText='–ë—É–¥—å –ª–∞—Å–∫–∞, –∑–∞–ø–æ–≤–Ω—ñ—Ç—å –ø–æ–ª—è –í—ñ–∫, –ó—Ä—ñ—Å—Ç —Ç–∞ –í–∞–≥–∞.';return}
        if((!isFinite(age)||!isFinite(height)||!isFinite(weight))||age<=0||height<=0||weight<=0){document.getElementById('result').innerText='–ù–µ–∫–æ—Ä–µ–∫—Ç–Ω—ñ —á–∏—Å–ª–æ–≤—ñ –∑–Ω–∞—á–µ–Ω–Ω—è. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤–≤–µ–¥–µ–Ω—ñ –¥–∞–Ω—ñ.';return}

        if(((age>100||height>250||weight>400)||(age<=5||height<=50||weight<=20))&&ReTryBut==0){
          output='–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –¥–ª—è –≤—ñ–∫—É, –∑—Ä–æ—Å—Ç—É —Ç–∞ –≤–∞–≥–∏.';
          document.getElementById('correctBtn').style.display='inline-block';
          document.getElementById('wrongBtn').style.display='inline-block';
          ReTryBut=1;document.getElementById('result').innerText=output;return;
        }

        ReTryBut=0;document.getElementById('correctBtn').style.display='none';document.getElementById('wrongBtn').style.display='none';

        try{
          const brm_last = BMR(age,height,weight,gender,activity);
          output += `–ü—Ä–∏–±–ª–∏–∑–Ω–∞ –Ω–æ—Ä–º–∞ –∫–∞–ª–æ—Ä—ñ–π –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ: ${Number(brm_last).toFixed(0)} –∫–∫–∞–ª\n`;
          output += `–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –±—ñ–ª–∫—ñ–≤ –Ω–∞ –¥–µ–Ω—å: ${Number(proteins(activity,weight)).toFixed(0)} –≥\n`;
          output += `–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∂–∏—Ä—ñ–≤ –Ω–∞ –¥–µ–Ω—å: ${Number(fat(brm_last)).toFixed(0)} –≥\n`;
          output += `–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤—É–≥–ª–µ–≤–æ–¥—ñ–≤ –Ω–∞ –¥–µ–Ω—å: ${Number(carb(brm_last)).toFixed(0)} –≥\n\n`;

  // ---------------------------------------------------------------------------------------
          const vitaminInfo = {
          Vitamin_C:  { name: "–í—ñ—Ç–∞–º—ñ–Ω C", unit: "–º–≥" },
          Vitamin_D:  { name: "–í—ñ—Ç–∞–º—ñ–Ω D", unit: "IU" },
          Vitamin_A:  { name: "–í—ñ—Ç–∞–º—ñ–Ω A", unit: "–º–∫–≥" },
          Vitamin_B1: { name: "–í—ñ—Ç–∞–º—ñ–Ω B1", unit: "–º–≥" },
          Vitamin_B6: { name: "–í—ñ—Ç–∞–º—ñ–Ω B6", unit: "–º–≥" },
          Vitamin_B12:{ name: "–í—ñ—Ç–∞–º—ñ–Ω B12", unit: "–º–∫–≥" }
          };
  // ---------------------------------------------------------------------------------------
          const vitamin = vitamins(age, gender, weight, activity);

          output += "–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∞ –¥–æ–±–æ–≤–∞ –Ω–æ—Ä–º–∞ –≤—ñ—Ç–∞–º—ñ–Ω—ñ–≤:\n";

          for (const key in vitamin) {
            const value = vitamin[key];
            const { name, unit } = vitaminInfo[key];

            output += `${name}: ${value.toFixed(2)} ${unit}\n`;
          }
  // ---------------------------------------------------------------------------------------
          const imt_value = IMT();
          output += `\n–Ü–Ω–¥–µ–∫—Å –º–∞—Å–∏ —Ç—ñ–ª–∞ (–Ü–ú–¢): ${isFinite(imt_value)?imt_value:'‚Äî'}\n`;
          output += `–Ü–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü—ñ—è –Ü–ú–¢: ${IMT_Interpretation(imt_value)}\n`;
        }catch(err){console.error(err);output='–°—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è—Ö.'}

        document.getElementById('result').innerText = output;
      }

      // –ó–∞–ø—É—Å–∫ –∑ –¥–µ—Ñ–æ–ª—Ç–Ω–∏–º–∏ –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
      window.addEventListener('load', ()=>{showData()});
    </script>
</body>
</html>