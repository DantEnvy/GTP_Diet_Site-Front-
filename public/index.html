s<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> FastDiet | Master Editor</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto:wght@400;700&family=Open+Sans:wght@400;700&family=Play:wght@400;700&family=Oswald:wght@400;700&family=Pacifico&family=Lobster&family=Amatic+SC&family=Merriweather&family=Comfortaa&display=swap" rel="stylesheet">
    
    <style>
        /* --- 1. –ë–ê–ó–ê –¢–ê –ö–û–õ–¨–û–†–ò --- */
        :root {
            --color-blue: rgb(66, 135, 245);
            --color-green: rgb(28, 201, 115);
            --primary: var(--color-green); 
            --secondary: var(--color-blue);
            --bg-card: rgba(255, 255, 255, 0.95);
            --text-main: #333333;
            --shadow: 0 10px 25px rgba(0,0,0,0.2);
            --font-main: 'Montserrat', sans-serif;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: var(--font-main);
            color: var(--text-main);
            line-height: 1.6;
            min-height: 100vh;
            display: flex; flex-direction: column;
            overflow-x: hidden;
            background: linear-gradient(135deg, var(--color-blue), var(--color-green));
            background-attachment: fixed;
        }

        a { text-decoration: none; color: inherit; transition: 0.3s; }

        /* --- 2. –•–ï–î–ï–† --- */
        header {
            background: var(--bg-card);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky; top: 0; z-index: 1000;
            padding: 15px 0;
            border-bottom: 3px solid var(--primary);
        }
        .container { width: 90%; max-width: 1200px; margin: 0 auto; position: relative; }
        .card img { pointer-events: auto; }
        .container { position: relative; }

        .flex-between { display: flex; justify-content: space-between; align-items: center; }
        
        .logo { font-size: 26px; font-weight: 800; color: var(--secondary); cursor: pointer; text-transform: uppercase; }
        .nav-links a { margin-left: 20px; font-weight: 600; cursor: pointer; color: #444; }
        .nav-links a.active { color: var(--primary); border-bottom: 2px solid var(--primary); }
        
        .header-btn {
            background: transparent; border: 2px solid var(--secondary); 
            color: var(--secondary); padding: 6px 18px; border-radius: 25px; 
            cursor: pointer; font-weight: bold; margin-left: 15px; transition: 0.3s;
        }
        .header-btn:hover { background: var(--secondary); color: white; }

        /* --- 3. –°–¢–†–£–ö–¢–£–†–ê –°–¢–û–†–Ü–ù–û–ö --- */
        .page-section { display: none; animation: fadeIn 0.5s ease; flex: 1; padding-bottom: 50px; }
        .page-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Hero */
        .hero {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(5px);
            color: white; text-align: center;
            padding: 80px 0; margin: 30px 0;
            border-radius: 20px; border: 1px solid rgba(255,255,255,0.3);
        }
        .hero h1 { font-size: 3rem; margin-bottom: 15px; text-shadow: 2px 2px 5px rgba(0,0,0,0.3); }

        /* Grid Layout (–°–Ü–¢–ö–ê) */
        .grid-3 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
            /* –¶–µ –≤–∞–∂–ª–∏–≤–æ, —â–æ–± –º–∏ –º–æ–≥–ª–∏ –¥–æ–¥–∞–≤–∞—Ç–∏ —Å—é–¥–∏ –µ–ª–µ–º–µ–Ω—Ç–∏ —á–µ—Ä–µ–∑ JS */
            align-items: start; 
        }

        /* CARD (–û–ö–ù–û –î–õ–Ø –¢–ï–ö–°–¢–ê) */
        .card {
            background: var(--bg-card);
            padding: 20px;
            border-radius: 15px;
            box-shadow: var(--shadow);
            border-top: 5px solid var(--secondary);
            transition: transform 0.3s;
            position: relative;
            display: flex; flex-direction: column;
        }
        .card img { width: 100%; height: 200px; object-fit: cover; border-radius: 10px; margin-bottom: 15px; pointer-events: none; }
        
        .card h3 { margin-bottom: 10px; color: var(--primary); }
        .editable-wrapper {
            position: relative; display: inline-block;
            border: 1px dashed transparent; 
            min-width: 50px; min-height: 50px;
        }
        .editable-wrapper.floating { position: absolute; cursor: move; z-index: 500; }
        
        .btn-main {
            display: inline-block; padding: 10px 30px; margin-top: 10px;
            background: white; color: var(--secondary); font-weight: 700;
            border-radius: 30px; box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            cursor: pointer;
        }

        /* --- 4. –†–ï–î–ê–ì–£–í–ê–ù–ù–Ø --- */
        
        /* –¶–µ–π –∫–ª–∞—Å –¥–æ–¥–∞—î—Ç—å—Å—è –¥–æ –≤–∏–±—Ä–∞–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞ (—Ä–∞–º–∫–∞) */
        .editing-active {
            outline: 2px dashed #ffeb3b;
            outline-offset: 2px;
            cursor: text;
        }
        
        /* –î–ª—è –∫–∞—Ä—Ç–∏–Ω–æ–∫, —è–∫—ñ –º–æ–∂–Ω–∞ —Ä–µ—Å–∞–π–∑–∏—Ç–∏ –ø—Ä–∏–º—É—Å–æ–≤–æ (Ctrl+Shift) */
        .resizable-img-wrapper {
            display: inline-block;
            position: relative;
        }

        /* --- 5. –ê–î–ú–Ü–ù –ü–ê–ù–ï–õ–¨ --- */
        #admin-panel {
            position: fixed; top: 0; right: -360px;
            width: 340px; height: 100vh;
            background: rgba(44, 62, 80, 0.98); 
            color: #ecf0f1; padding: 20px; 
            box-shadow: -5px 0 20px rgba(0,0,0,0.5);
            z-index: 9999; transition: right 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            overflow-y: auto; font-family: 'Roboto', sans-serif;
        }
        #admin-panel.active { right: 0; }

        .admin-row { display: flex; gap: 10px; margin-bottom: 15px; }
        
        .btn-tool { 
            background: #34495e; color: white; border: 1px solid #5d6d7e; 
            cursor: pointer; padding: 10px; margin-top: 5px; width: 100%; 
            text-align: left; border-radius: 5px; transition: 0.2s;
        }
        .btn-tool:hover { background: #415b76; transform: translateX(5px); }
        
        .btn-history { flex: 1; text-align: center; font-size: 1.2em; padding: 8px; background: #e67e22; border: none; border-radius: 5px; cursor: pointer; }
        .btn-history:hover { background: #d35400; }
        .btn-history:disabled { opacity: 0.5; cursor: not-allowed; }

        label { color: #bdc3c7; font-size: 0.8em; text-transform: uppercase; font-weight: bold; margin-top: 15px; display: block; }
        input[type="color"], select { width: 100%; height: 35px; border: none; border-radius: 4px; margin-top: 5px; }

        #style-controls { opacity: 0.3; pointer-events: none; transition: 0.3s; margin-top: 20px; border-top: 1px solid #555; padding-top: 10px;}
        #style-controls.active { opacity: 1; pointer-events: auto; }

        footer { background: rgba(0,0,0,0.3); color: white; padding: 30px; text-align: center; margin-top: auto; }
    </style>
</head>
<body id="main-body">

    <header>
        <div class="container flex-between">
            <div class="logo" onclick="switchPage('home')">FastDiet</div>
            <nav class="nav-links">
                <a onclick="switchPage('home')" class="nav-item active" id="nav-home">–ì–æ–ª–æ–≤–Ω–∞</a>
                <a onclick="switchPage('features')" class="nav-item" id="nav-features">–ü–µ—Ä–µ–≤–∞–≥–∏</a>
                <a onclick="switchPage('recipes')" class="nav-item" id="nav-recipes">–†–µ—Ü–µ–ø—Ç–∏</a>
                <a onclick="switchPage('contact')" class="nav-item" id="nav-contact">–í–∏—Ä–∞—Ö—É–≤–∞–Ω–Ω—è</a>
            </nav>
            <button class="header-btn" id="admin-toggle">–ê–¥–º—ñ–Ω</button>
        </div>
    </header>

    <main id="content-area">
        <section id="page-home" class="page-section active">
            <div class="container">
                <div class="hero">
                    <h1 class="editable-text">–ó–¥–æ—Ä–æ–≤–µ —Ö–∞—Ä—á—É–≤–∞–Ω–Ω—è</h1>
                    <p class="editable-text">–í–∞—à —à–ª—è—Ö –¥–æ —ñ–¥–µ–∞–ª—å–Ω–æ—ó —Ñ–æ—Ä–º–∏.</p>
                </div>
                <div class="grid-3">
                    <div class="card">
                         <h3 class="editable-text">–ü—Ä–∏–≤—ñ—Ç!</h3>
                         <p class="editable-text">–¶–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞ –∫–∞—Ä—Ç–∫–∞. –í–∏ –º–æ–∂–µ—Ç–µ —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ —ó—ó, –Ω–µ –ª–∞–º–∞—é—á–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="page-features" class="page-section">
            <div class="container">
                <h2 style="color: white; text-align: center;" class="editable-text">–ü–µ—Ä–µ–≤–∞–≥–∏</h2>
                <div class="grid-3">
                    <div class="card">
                        <h3 class="editable-text">üåø –ï–∫–æ</h3>
                        <p class="editable-text">100% –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–æ.</p>
                    </div>
                    <div class="card">
                        <h3 class="editable-text">‚ö° –®–≤–∏–¥–∫–æ</h3>
                        <p class="editable-text">–î–æ—Å—Ç–∞–≤–∫–∞ –∑–∞ 30 —Ö–≤.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="page-recipes" class="page-section">
            <div class="container">
                <h2 style="color: white; text-align: center;" class="editable-text">–ú–µ–Ω—é</h2>
                <div class="grid-3">
                    <div class="card">
                        <img src="https://source.unsplash.com/400x300/?salad" alt="Img">
                        <h3 class="editable-text">–°–∞–ª–∞—Ç –¶–µ–∑–∞—Ä</h3>
                        <p class="editable-text">–ö–ª–∞—Å–∏—á–Ω–∏–π —Ä–µ—Ü–µ–ø—Ç.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="page-contact" class="page-section">
            <!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>–ü—Ä–æ—Å—Ç–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å</title>
  <style>
    :root{
      --accent: #111;
      --muted: #efefef;
      --text: #111;
      --container-left: 60px; /* –≤—ñ–¥—Å—Ç—É–ø –ª—ñ–≤–æ—Ä—É—á —è–∫ –Ω–∞ —Ñ–æ—Ç–æ */
    }
    body{font-family: 'Segoe UI', Roboto, Arial, sans-serif; color:var(--text);}
    .page{
      max-width:1200px;
      margin:20px 40px 80px var(--container-left);
    }
    h1{
      font-size:48px;
      margin:10px 0 24px 0;
      font-weight:700;
      letter-spacing: -1px;
    }

    /* –§–æ—Ä–º–∞ ‚Äî –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–µ —Ä–æ–∑–º—ñ—â–µ–Ω–Ω—è –ø–æ–ª—ñ–≤ —è–∫ –Ω–∞ —Ñ–æ—Ç–æ */
    .row{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
    .inputs-row{display:flex;gap:12px;align-items:center;flex-wrap:nowrap;margin-bottom:18px}
    input[type="number"], input[type="text"]{
      width:150px;
      padding:6px 8px;
      border:1px solid #ccc;border-radius:4px;
      font-size:14px;
    }
    .radio-group{margin:14px 0;}
    .radio-line{display:flex;gap:18px;align-items:center;flex-wrap:wrap;margin-bottom:8px}
    label{font-size:15px}

    button{padding:8px 12px;border:1px solid #999;background:white;border-radius:4px;cursor:pointer}
    button:active{transform:translateY(1px)}

    /* –†–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî –≤–µ–ª–∏–∫–∞ —Å–≤—ñ—Ç–ª–æ-—Å—ñ—Ä–∞ –ø–∞–Ω–µ–ª—å —è–∫ –Ω–∞ —Ñ–æ—Ç–æ */
    .result-wrap{margin-top:18px}
    pre#result{
      background: linear-gradient(#f3f3f3,#f3f3f3);
      border:1px solid #e3e3e3;
      padding:22px;
      min-height:120px;
      white-space:pre-wrap;
      box-sizing:border-box;
      font-size:14px;
      color:#222;
    }

    /* –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤—ñ–¥—Å—Ç—É–ø—ñ–≤ –ø–æ–¥—ñ–±–Ω–æ –¥–æ —Å–∫—Ä—ñ–Ω–∞ */
    .controls{margin-top:14px}

    @media (max-width:800px){
      h1{font-size:32px}
      .inputs-row{flex-wrap:wrap}
      input[type="number"], input[type="text"]{width:140px}
    }
  </style>
  <div class="page">
    <h1>–í–≤–µ–¥—ñ—Ç—å —Å–≤–æ—ó –¥–∞–Ω—ñ</h1>

    <div class="inputs-row">
      <input id="age" placeholder="–í—ñ–∫" type="number" min="0">
      <input id="height" placeholder="–ó—Ä—ñ—Å—Ç(—É —Å–º)" type="number" min="0">
      <input id="weight" placeholder="–í–∞–≥–∞(—É –∫–≥)" type="number" min="0">
      <input id="allergy" placeholder="–ê–ª–µ—Ä–≥—ñ—ó" type="text">
      <input id="health" placeholder="–ù—é–∞–Ω—Å–∏ –∑—ñ –∑–¥–æ—Ä–æ–≤'—è–º" type="text">
    </div>

    <div class="radio-group">
      <p style="margin:6px 0 6px 0">–°—Ç–∞—Ç—å:</p>
      <div class="radio-line">
        <label><input type="radio" name="gender" value="male" checked> –ß–æ–ª–æ–≤—ñ–∫</label>
        <label><input type="radio" name="gender" value="female"> –ñ—ñ–Ω–∫–∞</label>
      </div>

      <p style="margin:12px 0 6px 0">–ê–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –∂–∏—Ç—Ç—è:</p>
      <div class="radio-line">
        <label><input type="radio" name="activity" value="very_high" checked> –î—É–∂–µ –í–∏—Å–æ–∫–∞ –ê–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å</label>
        <label><input type="radio" name="activity" value="high"> –í–∏—Å–æ–∫–∞ –ê–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å</label>
        <label><input type="radio" name="activity" value="medium"> –°–µ—Ä–µ–¥–Ω—è –ê–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å</label>
        <label><input type="radio" name="activity" value="small"> –ú–∞–ª–∞ –ê–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å</label>
        <label><input type="radio" name="activity" value="low"> –ù–∏–∑—å–∫–∞ –ê–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å</label>
      </div>
    </div>

    <div class="controls">
      <button id="showBtn" onclick="showData()">–ü–æ–∫–∞–∑–∞—Ç–∏ –º–æ—ó –¥–∞–Ω—ñ</button>
      <button id="correctBtn" style="display:none;margin-left:8px" onclick="clearResult(); showData();">–í–æ–Ω–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ</button>
      <button id="wrongBtn" style="display:none;margin-left:8px" onclick="reTry()">–í–æ–Ω–∏ –ø–æ–º–∏–ª–∫–æ–≤—ñ</button>
    </div>

    <h2 style="margin-top:28px">–í–∞—à—ñ –¥–∞–Ω—ñ:</h2>
    <div class="result-wrap"><pre id="result"></pre></div>
  </div>
        </section>
    </main>

    <footer>
        <p class="editable-text">&copy; 2025 DietPro.</p>
    </footer>

    <div id="admin-panel">
        <h3>‚öôÔ∏è –ü–∞–Ω–µ–ª—å –ö–µ—Ä—É–≤–∞–Ω–Ω—è</h3>
        
        <div class="admin-row">
            <button class="btn-history" id="btn-undo" title="–ù–∞–∑–∞–¥ (Ctrl+Z)">‚¨ÖÔ∏è</button>
            <button class="btn-history" id="btn-redo" title="–í–ø–µ—Ä–µ–¥ (Ctrl+Y)">‚û°Ô∏è</button>
        </div>

        <label>–°—Ç–≤–æ—Ä–µ–Ω–Ω—è</label>
        <button class="btn-tool" id="add-card-struct">üìÑ + –î–æ–¥–∞—Ç–∏ –ö–∞—Ä—Ç–∫—É (–°—Ç—Ä—É–∫—Ç—É—Ä–∞)</button>
        <button class="btn-tool" id="add-text-float">üí¨ + –¢–µ–∫—Å—Ç (–ü–ª–∞–≤—É—á–∏–π)</button>
        <button class="btn-tool" id="add-img">üñºÔ∏è + –ö–∞—Ä—Ç–∏–Ω–∫–∞ (–ø–ª–∞–≤–∞—é—á–∞)</button>
        <!--if (target.closest('.editable-wrapper')) {
                elToSelect = target.closest('.editable-wrapper');
                
                // –ï—Å–ª–∏ —ç—Ç–æ –ø–ª–∞–≤–∞—é—â–∏–π —ç–ª–µ–º–µ–Ω—Ç, –≥–æ—Ç–æ–≤–∏–º –∫ Drag
                if (elToSelect.classList.contains('floating')) {
                    isDragging = true;
                    startX = e.clientX; startY = e.clientY;
                    startL = elToSelect.offsetLeft; startT = elToSelect.offsetTop;
                }
            } 
            // b) –¢–µ–∫—Å—Ç–æ–≤—ã–π –±–ª–æ–∫ (Editable)
            else if (target.classList.contains('editable-text-block') || target.closest('.editable-text-block')) {
                elToSelect = target.classList.contains('editable-text-block') ? target : target.closest('.editable-text-block');
                if (elToSelect && elToSelect.tagName !== 'IMG') {
                    // –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–π —Ç–µ–∫—Å—Ç
                    elToSelect.contentEditable = "true";
                }
            }

            –ù–ê–î–û –ò–§ –í "–ò–ì–ù–û–† –ê–î–ú–ò–ù–ö–ò"
         -->

        <div id="style-controls">
            <label style="color: #f1c40f;">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–æ—Ä</label>

            <label>–†–æ–∑–º—ñ—Ä —à—Ä–∏—Ñ—Ç—É (px):</label>
            <input type="number" id="font-size-input" value="16">

            <label>italics:</label>
            <select id="font-italic"></select>

            <label>Bold:</label>
            <select id="font-bold"></select>

            <label>–®—Ä–∏—Ñ—Ç:</label>
            <select id="font-select"></select>
            
            <label>–ö–æ–ª—ñ—Ä —Ç–µ–∫—Å—Ç—É:</label>
            <input type="color" id="color-text">
            
            <label>–§–æ–Ω –µ–ª–µ–º–µ–Ω—Ç–∞:</label>
            <div style="display: flex; gap: 5px;">
                <input type="color" id="color-bg" value="#ffffff">
                <button class="btn-tool" style="width: auto; margin: 5px 0 0;" id="btn-no-bg">–ü—Ä–æ–∑–æ—Ä–∏–π</button>
            </div>

            <button class="btn-tool" style="background: #c0392b; margin-top: 20px;" id="btn-delete">üóëÔ∏è –í–∏–¥–∞–ª–∏—Ç–∏ –µ–ª–µ–º–µ–Ω—Ç</button>
        </div>

        <button class="btn-tool" style="background: #7f8c8d; margin-top: 30px;" id="btn-close-admin">–ó–∞–∫—Ä–∏—Ç–∏</button>
    </div>

    <script>
        // --- 1. –Ü–°–¢–û–†–Ü–Ø –ó–ú–Ü–ù (UNDO/REDO) ---
        const historyStack = [];
        let historyIndex = -1;
        const maxHistory = 50;

        function saveState() {
            // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ HTML –∫–æ–Ω—Ç–µ–Ω—Ç—É
            const content = document.getElementById('main-body').innerHTML;
            
            // –Ø–∫—â–æ –º–∏ "–≤ –º–∏–Ω—É–ª–æ–º—É", –≤—ñ–¥—Ä—ñ–∑–∞—î–º–æ "–º–∞–π–±—É—Ç–Ω—î"
            if (historyIndex < historyStack.length - 1) {
                historyStack.splice(historyIndex + 1);
            }
            
            historyStack.push(content);
            if (historyStack.length > maxHistory) historyStack.shift();
            else historyIndex++;

            updateHistoryButtons();
        }

        function restoreState(index) {
            if (index >= 0 && index < historyStack.length) {
                // –ü–µ—Ä–µ–¥ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è–º —Ç—Ä–µ–±–∞ –∑–±–µ—Ä–µ–≥—Ç–∏ –≥–ª–æ–±–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ (—è–∫—â–æ —î), –∞–ª–µ —Ç—É—Ç –º–∏ –∑–±–µ—Ä—ñ–≥–∞—î–º–æ –≤–µ—Å—å body
                document.getElementById('main-body').innerHTML = historyStack[index];
                historyIndex = index;
                
                // –ü—ñ—Å–ª—è –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è DOM —Ç—Ä–µ–±–∞ –Ω–∞–Ω–æ–≤–æ –Ω–∞–≤—ñ—Å–∏—Ç–∏ –æ–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ–π, 
                // –ê–ë–û –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –¥–µ–ª–µ–≥—É–≤–∞–Ω–Ω—è –ø–æ–¥—ñ–π (—â–æ –º–∏ —ñ —Ä–æ–±–∏–º–æ).
                // –ê–ª–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –µ–ª–µ–º–µ–Ω—Ç–∏ (DOM references) –≤—Ç—Ä–∞—á–∞—é—Ç—å—Å—è, —Ç–æ–º—É:
                deselectElement(); 
                reinitializeAdmin(); // –ü–µ—Ä–µ–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –∫–Ω–æ–ø–æ–∫ –∞–¥–º—ñ–Ω–∫–∏, –±–æ –≤–æ–Ω–∏ —Ç–µ–∂ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ body
            }
            updateHistoryButtons();
        }

        function undo() { if (historyIndex > 0) restoreState(historyIndex - 1); }
        function redo() { if (historyIndex < historyStack.length - 1) restoreState(historyIndex + 1); }

        function updateHistoryButtons() {
            // –û—Å–∫—ñ–ª—å–∫–∏ –∫–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ–º–∞–ª—å–æ–≤—É—é—Ç—å—Å—è –ø—Ä–∏ restoreState, —ó—Ö —Ç—Ä–µ–±–∞ —à—É–∫–∞—Ç–∏ –Ω–∞–Ω–æ–≤–æ
            const btnUndo = document.getElementById('btn-undo');
            const btnRedo = document.getElementById('btn-redo');
            if(btnUndo) btnUndo.disabled = historyIndex <= 0;
            if(btnRedo) btnRedo.disabled = historyIndex >= historyStack.length - 1;
        }

        // –ì–∞—Ä—è—á—ñ –∫–ª–∞–≤—ñ—à—ñ
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.key === 'z') { e.preventDefault(); undo(); }
            if (e.ctrlKey && e.key === 'y') { e.preventDefault(); redo(); }
        });

        // --- 2. –õ–û–ì–Ü–ö–ê –ê–î–ú–Ü–ù–ö–ò ---
        let isAdmin = false;
        let selectedEl = null;
        
        function reinitializeAdmin() {
            // –û—Å–∫—ñ–ª—å–∫–∏ body –ø–µ—Ä–µ–∑–∞–ø–∏—Å—É—î—Ç—å—Å—è, —Ç—Ä–µ–±–∞ –∑–∞–Ω–æ–≤–æ –∑–Ω–∞–π—Ç–∏ –µ–ª–µ–º–µ–Ω—Ç–∏ –∞–¥–º—ñ–Ω–∫–∏
            document.getElementById('admin-toggle').onclick = () => {
                const pass = prompt("–ü–∞—Ä–æ–ª—å:", "");
                if (pass === "Admin_GPT") toggleAdmin(true);
            };
            document.getElementById('btn-close-admin').onclick = () => toggleAdmin(false);
            
            document.getElementById('btn-undo').onclick = undo;
            document.getElementById('btn-redo').onclick = redo;

            document.getElementById('add-card-struct').onclick = addCardStructure;
            document.getElementById('add-text-float').onclick = addFloatingText;
            document.getElementById('add-img').onclick = () => addFloating('img');
            document.getElementById('btn-delete').onclick = deleteSelected;

            // –°—Ç–∏–ª—ñ
            document.getElementById('font-size-input').onchange = (e) => applyStyle('fontSize', e.target.value + 'px');
            document.getElementById('font-select').onchange = (e) => applyStyle('fontFamily', e.target.value);
            document.getElementById('color-text').oninput = (e) => applyStyle('color', e.target.value);
            document.getElementById('color-bg').oninput = (e) => applyStyle('backgroundColor', e.target.value);
            document.getElementById('btn-no-bg').onclick = () => applyStyle('backgroundColor', 'transparent');

            initFonts();
            
            // –ù–∞–≤—ñ–≥–∞—Ü—ñ—è
            setupNav();
            
        }
        document.addEventListener('mousedown', (e) => {
            if (!isAdmin) return;
            const target = e.target;
            let elToSelect = null;

            // 1. –ï—Å–ª–∏ –∫–ª–∏–∫ –ø–æ —Ä—É—á–∫–µ —Ä–µ—Å–∞–π–∑–∞
            if (target.classList.contains('resize-handle')) {
                isResizing = true;
                resizeDir = target.className.match(/rh-(\w+)/)[1];
                selectedEl = target.parentElement; // editable-wrapper
                
                startX = e.clientX; startY = e.clientY;
                startW = selectedEl.offsetWidth; startH = selectedEl.offsetHeight;
                startRatio = startW / startH;
                
                e.stopPropagation(); e.preventDefault();
                return;
            }

            // –ò–≥–Ω–æ—Ä –∞–¥–º–∏–Ω–∫–∏ –∏ —Ö–µ–¥–µ—Ä–∞
            if (target.closest('#admin-panel') || target.closest('header')) return;

            // 2. –õ–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞:

            // a) –ü–ª–∞–≤–∞—é—â–∏–π –∏–ª–∏ –ö–∞—Ä—Ç–∏–Ω–∫–∞ (Resizable/Draggable)
            if (target.closest('.editable-wrapper')) {
                elToSelect = target.closest('.editable-wrapper');
                
                // –ï—Å–ª–∏ —ç—Ç–æ –ø–ª–∞–≤–∞—é—â–∏–π —ç–ª–µ–º–µ–Ω—Ç, –≥–æ—Ç–æ–≤–∏–º –∫ Drag
                if (elToSelect.classList.contains('floating')) {
                    isDragging = true;
                    startX = e.clientX; startY = e.clientY;
                    startL = elToSelect.offsetLeft; startT = elToSelect.offsetTop;
                }
            } 
            // b) –¢–µ–∫—Å—Ç–æ–≤—ã–π –±–ª–æ–∫ (Editable)
            else if (target.classList.contains('editable-text-block') || target.closest('.editable-text-block')) {
                elToSelect = target.classList.contains('editable-text-block') ? target : target.closest('.editable-text-block');
                if (elToSelect && elToSelect.tagName !== 'IMG') {
                    // –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–π —Ç–µ–∫—Å—Ç
                    elToSelect.contentEditable = "true";
                }
            }
            
            if (elToSelect) {
                selectElement(elToSelect);
            } else {
                deselect();
            }
        });

        function toggleAdmin(active) {
            isAdmin = active;
            const panel = document.getElementById('admin-panel');
            if (active) {
                panel.classList.add('active');
                document.body.classList.add('admin-mode');
                // –ó–±–µ—Ä–µ–≥—Ç–∏ –ø–æ—á–∞—Ç–∫–æ–≤–∏–π —Å—Ç–∞–Ω –ø—Ä–∏ –≤—Ö–æ–¥—ñ
                if(historyStack.length === 0) saveState();
                alert("–†–µ–∂–∏–º –ê–¥–º—ñ–Ω–∞.\n‚Ä¢ –ö–ª—ñ–∫ –ø–æ —Ç–µ–∫—Å—Ç—É/–∫–∞—Ä—Ç—Ü—ñ -> –†–µ–¥–∞–≥—É–≤–∞—Ç–∏.\n‚Ä¢ –ö–Ω–æ–ø–∫–∏ Undo/Redo –ø—Ä–∞—Ü—é—é—Ç—å.\n‚Ä¢ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è.");
            } else {
                panel.classList.remove('active');
                document.body.classList.remove('admin-mode');
                deselectElement();
            }
        }

        // --- 3. –§–£–ù–ö–¶–Ü–û–ù–ê–õ –†–ï–î–ê–ì–£–í–ê–ù–ù–Ø ---
        
        // –î–µ–ª–µ–≥—É–≤–∞–Ω–Ω—è –ø–æ–¥—ñ–π (Click) –¥–ª—è –≤–∏–±–æ—Ä—É –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
        document.addEventListener('click', (e) => {
            if (!isAdmin) return;
            // –Ü–≥–Ω–æ—Ä—É—î–º–æ –∫–ª—ñ–∫–∏ –ø–æ –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—ñ
            if (e.target.closest('#admin-panel') || e.target.closest('.header-btn')) return;

            e.preventDefault(); // –©–æ–± –Ω–µ –ø–µ—Ä–µ—Ö–æ–¥–∏–ª–æ –∑–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º–∏ –≤ –∞–¥–º—ñ–Ω—Ü—ñ
            
            // –ó–Ω–∞—Ö–æ–¥–∏–º–æ –Ω–∞–π–±–ª–∏–∂—á–∏–π —Ü—ñ–∫–∞–≤–∏–π –µ–ª–µ–º–µ–Ω—Ç
            let target = e.target;
            
            // –Ø–∫—â–æ –∫–ª—ñ–∫ –ø–æ –∫–∞—Ä—Ç–∏–Ω—Ü—ñ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∫–∞—Ä—Ç–∫–∏ - –≤–∏–±–∏—Ä–∞—î–º–æ –∫–∞—Ä—Ç–∫—É –∞–±–æ –∫–∞—Ä—Ç–∏–Ω–∫—É
            if (target.tagName === 'IMG' && target.closest('.card')) {
                // –í–∏–±–∏—Ä–∞—î–º–æ –∫–∞—Ä—Ç–∏–Ω–∫—É –¥–ª—è –∑–∞–º—ñ–Ω–∏ (–ø–æ–∫–∏ —â–æ –ø—Ä–æ—Å—Ç–æ —Ä–∞–º–∫–∞)
                selectElement(target);
                return;
            }

            // –Ø–∫—â–æ –∫–ª—ñ–∫ –ø–æ —Ç–µ–∫—Å—Ç—É
            if (['H1','H2','H3','P','A','SPAN','DIV'].includes(target.tagName)) {
                // –Ø–∫—â–æ —Ü–µ –∫–∞—Ä—Ç–∫–∞, –≤–∏–±–∏—Ä–∞—î–º–æ —Å–∞–º—É –∫–∞—Ä—Ç–∫—É, —è–∫—â–æ –∫–ª—ñ–∫–Ω—É–ª–∏ –Ω–∞ —Ñ–æ–Ω –∫–∞—Ä—Ç–∫–∏
                if (target.classList.contains('card')) {
                    selectElement(target);
                    return;
                }
                // –Ü–Ω–∞–∫—à–µ –≤–∏–±–∏—Ä–∞—î–º–æ —Ç–µ–∫—Å—Ç
                selectElement(target);
            }
        });

        // –î–µ–ª–µ–≥—É–≤–∞–Ω–Ω—è "input" –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —ñ—Å—Ç–æ—Ä—ñ—ó –ø—Ä–∏ –∑–º—ñ–Ω—ñ —Ç–µ–∫—Å—Ç—É
        document.addEventListener('input', (e) => {
            if(isAdmin && selectedEl && selectedEl.contains(e.target)) {
                // –ú–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ debounce (–∑–∞—Ç—Ä–∏–º–∫—É), —â–æ–± –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –∫–æ–∂–Ω—É –±—É–∫–≤—É
                // –¢—É—Ç —Å–ø—Ä–æ—â–µ–Ω–æ: –∑–±–µ—Ä—ñ–≥–∞—î–º–æ –ø—Ä–∏ –≤—Ç—Ä–∞—Ç—ñ —Ñ–æ–∫—É—Å—É (blur) –∞–±–æ –≤—Ä—É—á–Ω—É
            }
        });
        
        // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ —ñ—Å—Ç–æ—Ä—ñ—é –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ñ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É
        document.addEventListener('focusout', (e) => {
            if(isAdmin && e.target.isContentEditable) {
                saveState();
            }
        });

        function selectElement(el) {
            if (selectedEl) deselectElement();
            
            selectedEl = el;
            selectedEl.classList.add('editing-active');
            
            // –ê–∫—Ç–∏–≤—É—î–º–æ –ø–∞–Ω–µ–ª—å
            document.getElementById('style-controls').classList.add('active');
            if (selectedEl.tagName === 'IMG') {
                selectedEl.contentEditable = "false";
             // ‚ùå –Ω–µ –≤–∫–ª—é—á–∞—Ç–∏ text tools
            }

            // –£–≤—ñ–º–∫–Ω–µ–Ω–Ω—è —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É (—è–∫—â–æ —Ü–µ –Ω–µ –∫–∞—Ä—Ç–∏–Ω–∫–∞)
            if (selectedEl.tagName !== 'IMG') {
                selectedEl.contentEditable = "true";
                selectedEl.focus();
            } else {
                // –Ø–∫—â–æ –∫–∞—Ä—Ç–∏–Ω–∫–∞ - –ø—Ä–æ–ø–æ–Ω—É—î–º–æ –∑–º—ñ–Ω–∏—Ç–∏ URL
                if(confirm("–ó–º—ñ–Ω–∏—Ç–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫—É?")) {
                    const newUrl = prompt("URL –∫–∞—Ä—Ç–∏–Ω–∫–∏:", selectedEl.src);
                    if(newUrl) {
                        selectedEl.src = newUrl;
                        saveState();
                    }
                }
            }

            // –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –∑–Ω–∞—á–µ–Ω—å –≤ –∞–¥–º—ñ–Ω—Ü—ñ
            const computed = window.getComputedStyle(selectedEl);
            document.getElementById('color-text').value = rgbToHex(computed.color);
            document.getElementById('color-bg').value = rgbToHex(computed.backgroundColor);
        }

        function deselectElement() {
            if (selectedEl) {
                selectedEl.contentEditable = "false";
                selectedEl.classList.remove('editing-active');
                selectedEl = null;
                const controls = document.getElementById('style-controls');
                if(controls) controls.classList.remove('active');
            }
        }

        function applyStyle(prop, val) {
            if (selectedEl) {
                selectedEl.style[prop] = val;
                saveState();
            }
        }

        function deleteSelected() {
            if (selectedEl && confirm("–í–∏–¥–∞–ª–∏—Ç–∏?")) {
                selectedEl.remove();
                deselectElement();
                saveState();
            }
        }

        // --- 4. –°–¢–í–û–†–ï–ù–ù–Ø –ï–õ–ï–ú–ï–ù–¢–Ü–í ---

        // –§—É–Ω–∫—Ü—ñ—è 1: –î–æ–¥–∞—Ç–∏ –ö–ê–†–¢–ö–£ (–≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É)
        function addCardStructure() {
            // –ó–Ω–∞—Ö–æ–¥–∏–º–æ –∞–∫—Ç–∏–≤–Ω—É —Å–µ–∫—Ü—ñ—é
            const activeSection = document.querySelector('.page-section.active');
            // –ó–Ω–∞—Ö–æ–¥–∏–º–æ –≤ –Ω—ñ–π grid (—è–∫—â–æ —î)
            let grid = activeSection.querySelector('.grid-3');
            
            if (!grid) {
                // –Ø–∫—â–æ —Å—ñ—Ç–∫–∏ –Ω–µ–º–∞—î, —Å—Ç–≤–æ—Ä—é—î–º–æ –∞–±–æ –¥–æ–¥–∞—î–º–æ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
                const container = activeSection.querySelector('.container');
                if(!container) return alert("–ü–æ–º–∏–ª–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏");
                
                // –°–ø—Ä–æ–±—É—î–º–æ –¥–æ–¥–∞—Ç–∏ grid, —è–∫—â–æ –π–æ–≥–æ –Ω–µ–º–∞
                grid = document.createElement('div');
                grid.className = 'grid-3';
                container.appendChild(grid);
            }

            // –°—Ç–≤–æ—Ä—é—î–º–æ HTML –∫–∞—Ä—Ç–∫–∏
            const card = document.createElement('div');
            card.className = 'card';
            card.innerHTML = `
                <img src="https://source.unsplash.com/400x300/?food" alt="New Dish">
                <h3>–ù–æ–≤–∞ —Å—Ç—Ä–∞–≤–∞</h3>
                <p>–û–ø–∏—Å —Å—Ç—Ä–∞–≤–∏ –∞–±–æ –ø–æ—Å–ª—É–≥–∏.</p>
            `;
            
            grid.appendChild(card);
            saveState(); // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –≤ —ñ—Å—Ç–æ—Ä—ñ—é
            
            // –û–¥—Ä–∞–∑—É —Å–∫—Ä–æ–ª–∏–º–æ –¥–æ –Ω–µ—ó
            card.scrollIntoView({behavior: "smooth"});
        }

        // –§—É–Ω–∫—Ü—ñ—è 2: –î–æ–¥–∞—Ç–∏ –ø–ª–∞–≤—É—á–∏–π —Ç–µ–∫—Å—Ç (—è–∫—â–æ —Ç—Ä–µ–±–∞ –ø–æ–≤–µ—Ä—Ö —É—Å—å–æ–≥–æ)
        function addFloatingText() {
            const activeSection = document.querySelector('.page-section.active .container');
            const div = document.createElement('div');
            div.innerText = "–í–∞—à —Ç–µ–∫—Å—Ç";
            div.style.position = "absolute";
            div.style.top = "50px";
            div.style.left = "50px";
            div.style.background = "white";
            div.style.padding = "10px";
            div.style.cursor = "move";
            // –î–æ–¥–∞—î–º–æ drag –ª–æ–≥—ñ–∫—É —Ç—ñ–ª—å–∫–∏ –¥–ª—è —Ü—å–æ–≥–æ —Ç–∏–ø—É, —è–∫—â–æ —Ç—Ä–µ–±–∞ (—Å–ø—Ä–æ—â–µ–Ω–æ —Ç—É—Ç)
            activeSection.appendChild(div);
            saveState();
        }
        
        function addFloating(type) {
            const container = document.querySelector('.page-section.active .container');
            const wrap = document.createElement('div');
            wrap.className = 'editable-wrapper floating';
            wrap.style.left = '50px'; wrap.style.top = '50px';

            if (type === 'text') {
                wrap.innerHTML = `<div class="editable-text-block" style="padding:10px; background:rgba(255,255,255,0.9); border:1px solid #ddd; min-width:150px;">–í–∞—à —Ç–µ–∫—Å—Ç</div>`;
            } else {
                const url = prompt("URL –∫–∞—Ä—Ç–∏–Ω–∫–∏:", "https://source.unsplash.com/250x250/?food");
                if(!url) return;
                card.innerHTML = `
                <div class="editable-wrapper"><img src="https://source.unsplash.com/400x300/?pasta" alt="img"></div>
                <h3 class="editable-text-block">–ù–æ–≤–∞—è –∑–∞–ø–∏—Å—å</h3>
                <p class="editable-text-block">–û–ø–∏—Å–∞–Ω–∏–µ.</p>`;
                wrap.style.width = '200px'; wrap.style.height = '200px';
            }
            
            addHandles(wrap);
            container.appendChild(wrap);
            selectElement(wrap);
            saveState();
        }
        // --- 5. –î–û–î–ê–¢–ö–û–í–Ü –§–£–ù–ö–¶–Ü–á ---

        function initFonts() {
        const fonts = [
        "Montserrat", "Roboto", "Open Sans", "Oswald", "Pacifico",
        "Lobster", "Comfortaa", "Arial", "Helvetica",
        "Times New Roman", "Courier New", "Georgia",
        "Play", "Merriweather", "Amatic SC",
        "Lucida Sans Unicode", "Segoe UI",
        // —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ñ
        "Inter", "Poppins", "Lato", "Nunito", "Raleway",
        "Ubuntu", "DM Sans", "Manrope",
        // –∑–∞–≥–æ–ª–æ–≤–∫–∏
        "Bebas Neue", "Anton", "Playfair Display", "Cinzel",
        // –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ñ
        "Dancing Script", "Great Vibes", "Indie Flower",
        // –º–æ–Ω–æ
        "JetBrains Mono", "Fira Code",
        // —Å–∏—Å—Ç–µ–º–Ω—ñ
        "Verdana", "Tahoma", "Calibri", "Consolas"];
            const sel = document.getElementById('font-select');
            sel.innerHTML = "";
            fonts.forEach(f => {
                const opt = document.createElement('option');
                opt.value = f; opt.innerText = f;
                sel.appendChild(opt);
            });
        }

        function rgbToHex(rgb) {
            if(!rgb || rgb.includes('rgba(0, 0, 0, 0)')) return "#ffffff";
            if(rgb.startsWith('#')) return rgb;
            let sep = rgb.indexOf(",") > -1 ? "," : " ";
            let rgbArr = rgb.substr(4).split(")")[0].split(sep);
            let r = (+rgbArr[0]).toString(16), g = (+rgbArr[1]).toString(16), b = (+rgbArr[2]).toString(16);
            if(r.length==1)r="0"+r; if(g.length==1)g="0"+g; if(b.length==1)b="0"+b;
            return "#" + r + g + b;
        }

        // –ù–∞–≤—ñ–≥–∞—Ü—ñ—è
        function setupNav() {
            window.switchPage = function(pageId) {
                document.querySelectorAll('.page-section').forEach(s => s.classList.remove('active'));
                document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
                
                const p = document.getElementById('page-'+pageId);
                const n = document.getElementById('nav-'+pageId);
                if(p) p.classList.add('active');
                if(n) n.classList.add('active');
            }
        }

        // –ó–∞–ø—É—Å–∫
        reinitializeAdmin();

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è Ctrl+Shift (–ü—Ä–æ–ø–æ—Ä—Ü—ñ–π–Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∞ - –ø—Ä–∏–∫–ª–∞–¥ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó —á–µ—Ä–µ–∑ CSS –∫–ª–∞—Å–∏)
        // –¢—É—Ç –º–∏ –ø—Ä–æ—Å—Ç–æ –±–ª–æ–∫—É—î–º–æ `object-fit` –ø—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ –∫–ª–∞–≤—ñ—à, —è–∫—â–æ —Ç—Ä–µ–±–∞, 
        // –∞–ª–µ –≤ —Ü—å–æ–º—É –∫–æ–¥—ñ –∫–∞—Ä—Ç–∏–Ω–∫–∏ —ñ —Ç–∞–∫ –∞–¥–∞–ø—Ç–∏–≤–Ω—ñ (width 100%).
        
    let ReTryBut = 0;
    function clearResult(){document.getElementById('result').innerText='';document.getElementById('correctBtn').style.display='none'}
    function reTry(){ReTryBut=0;document.getElementById('result').innerText='';document.getElementById('wrongBtn').style.display='none';document.getElementById('correctBtn').style.display='none'}

    function IMT(){
      const height = Number(document.getElementById('height').value);
      const weight = Number(document.getElementById('weight').value);
      if(!height||!weight) return NaN;
      return Number((weight/((height/100)**2)).toFixed(2));
    }

    function IMT_Interpretation(imt_value){
      if(!isFinite(imt_value)) return '–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö –¥–ª—è —ñ–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü—ñ—ó';
      if(imt_value<16) return '–í–∏—Ä–∞–∂–µ–Ω–∏–π –¥–µ—Ñ—ñ—Ü–∏—Ç –º–∞—Å–∏ —Ç—ñ–ª–∞';
      if(imt_value<18.5) return '–ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—è (–¥–µ—Ñ—ñ—Ü–∏—Ç) –º–∞—Å–∞ —Ç—ñ–ª–∞';
      if(imt_value<25) return '–ù–æ—Ä–º–∞–ª—å–Ω–∞ –º–∞—Å–∞ —Ç—ñ–ª–∞';
      if(imt_value<30) return '–ù–∞–¥–º—ñ—Ä–Ω–∞ –º–∞—Å–∞ —Ç—ñ–ª–∞ (–ø—Ä–µ–¥–æ–∂–∏—Ä—ñ–Ω–Ω—è)';
      if(imt_value<35) return '–û–∂–∏—Ä—ñ–Ω–Ω—è I —Å—Ç—É–ø–µ–Ω—è';
      if(imt_value<40) return '–û–∂–∏—Ä—ñ–Ω–Ω—è II —Å—Ç—É–ø–µ–Ω—è';
      return '–û–∂–∏—Ä—ñ–Ω–Ω—è III —Å—Ç—É–ø–µ–Ω—è';
    }

    function BMR(age,height,weight,gender,activity){
      age=Number(age);height=Number(height);weight=Number(weight);
      const multipliers={very_high:1.9,high:1.725,medium:1.55,small:1.375,low:1.2};
      let bmr = (10*weight)+(6.25*height)-(5*age)+(gender==='male'?5:-161);
      return bmr*(multipliers[activity]??1.55);
    }

    function proteins(activity,weight){const m={very_high:2,high:1.8,medium:1.4,small:1.2,low:0.8}; return Number(weight)*(m[activity]??1.4)}
    function fat(brm_last){return (0.3*brm_last)/9}
    function carb(brm_last){return (0.4*brm_last)/4}

    function vitamins(age,gender,weight,activity){
      age=Number(age);weight=Number(weight);
      const multipliers={very_high:1.4,high:1.2,medium:1.1,small:1,low:0.8};
      const vitaminRDA={Vitamin_C:90,Vitamin_D:800,Vitamin_A:700,Vitamin_B1:1.1,Vitamin_B6:1.3,Vitamin_B12:2.4};
      const genderFactor={male:1,female:0.9};
      let ageFactor = age<=3?0.8:age<=8?0.9:age<=13?1:age<=18?1.1:age<=50?1:1.2;
      const activityMultiplier = multipliers[activity] ?? 1.1;
      const gFactor = genderFactor[gender] ?? 1;
      const weightFactor = (weight>0)?(weight/70):1;
      return {
        Vitamin_D: vitaminRDA.Vitamin_D * ageFactor * gFactor * activityMultiplier * weightFactor,
        Vitamin_C: vitaminRDA.Vitamin_C * ageFactor * gFactor * activityMultiplier * weightFactor,
        Vitamin_B12: vitaminRDA.Vitamin_B12 * ageFactor * gFactor * activityMultiplier * weightFactor,
        Vitamin_A: vitaminRDA.Vitamin_A * ageFactor * gFactor * activityMultiplier * weightFactor,
        Vitamin_B1: vitaminRDA.Vitamin_B1 * ageFactor * gFactor * activityMultiplier * weightFactor,
        Vitamin_B6: vitaminRDA.Vitamin_B6 * ageFactor * gFactor * activityMultiplier * weightFactor
      };
    }

    function showData(){
      const ageRaw = document.getElementById('age').value;
      const heightRaw = document.getElementById('height').value;
      const weightRaw = document.getElementById('weight').value;
      const age = Number(ageRaw), height = Number(heightRaw), weight = Number(weightRaw);
      const gender = document.querySelector('input[name="gender"]:checked')?.value || 'male';
      const activity = document.querySelector('input[name="activity"]:checked')?.value || 'medium';

      let output = '';
      if(!ageRaw||!heightRaw||!weightRaw){document.getElementById('result').innerText='–ë—É–¥—å –ª–∞—Å–∫–∞, –∑–∞–ø–æ–≤–Ω—ñ—Ç—å –ø–æ–ª—è –í—ñ–∫, –ó—Ä—ñ—Å—Ç —Ç–∞ –í–∞–≥–∞.';return}
      if((!isFinite(age)||!isFinite(height)||!isFinite(weight))||age<=0||height<=0||weight<=0){document.getElementById('result').innerText='–ù–µ–∫–æ—Ä–µ–∫—Ç–Ω—ñ —á–∏—Å–ª–æ–≤—ñ –∑–Ω–∞—á–µ–Ω–Ω—è. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤–≤–µ–¥–µ–Ω—ñ –¥–∞–Ω—ñ.';return}

      if(((age>100||height>250||weight>400)||(age<=5||height<=50||weight<=20))&&ReTryBut==0){
        output='–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –¥–ª—è –≤—ñ–∫—É, –∑—Ä–æ—Å—Ç—É —Ç–∞ –≤–∞–≥–∏.';
        document.getElementById('correctBtn').style.display='inline-block';
        document.getElementById('wrongBtn').style.display='inline-block';
        ReTryBut=1;document.getElementById('result').innerText=output;return;
      }

      ReTryBut=0;document.getElementById('correctBtn').style.display='none';document.getElementById('wrongBtn').style.display='none';

      try{
        const brm_last = BMR(age,height,weight,gender,activity);
        output += `–ü—Ä–∏–±–ª–∏–∑–Ω–∞ –Ω–æ—Ä–º–∞ –∫–∞–ª–æ—Ä—ñ–π –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ: ${Number(brm_last).toFixed(0)} –∫–∫–∞–ª\n`;
        output += `–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –±—ñ–ª–∫—ñ–≤ –Ω–∞ –¥–µ–Ω—å: ${Number(proteins(activity,weight)).toFixed(0)} –≥\n`;
        output += `–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∂–∏—Ä—ñ–≤ –Ω–∞ –¥–µ–Ω—å: ${Number(fat(brm_last)).toFixed(0)} –≥\n`;
        output += `–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤—É–≥–ª–µ–≤–æ–¥—ñ–≤ –Ω–∞ –¥–µ–Ω—å: ${Number(carb(brm_last)).toFixed(0)} –≥\n\n`;

// ---------------------------------------------------------------------------------------
        const vitaminInfo = {
        Vitamin_C:  { name: "–í—ñ—Ç–∞–º—ñ–Ω C", unit: "–º–≥" },
        Vitamin_D:  { name: "–í—ñ—Ç–∞–º—ñ–Ω D", unit: "IU" },
        Vitamin_A:  { name: "–í—ñ—Ç–∞–º—ñ–Ω A", unit: "–º–∫–≥" },
        Vitamin_B1: { name: "–í—ñ—Ç–∞–º—ñ–Ω B1", unit: "–º–≥" },
        Vitamin_B6: { name: "–í—ñ—Ç–∞–º—ñ–Ω B6", unit: "–º–≥" },
        Vitamin_B12:{ name: "–í—ñ—Ç–∞–º—ñ–Ω B12", unit: "–º–∫–≥" }
        };
// ---------------------------------------------------------------------------------------
        const vitamin = vitamins(age, gender, weight, activity);

        output += "–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∞ –¥–æ–±–æ–≤–∞ –Ω–æ—Ä–º–∞ –≤—ñ—Ç–∞–º—ñ–Ω—ñ–≤:\n";

        for (const key in vitamin) {
          const value = vitamin[key];
          const { name, unit } = vitaminInfo[key];

          output += `${name}: ${value.toFixed(2)} ${unit}\n`;
        }
// ---------------------------------------------------------------------------------------
        const imt_value = IMT();
        output += `\n–Ü–Ω–¥–µ–∫—Å –º–∞—Å–∏ —Ç—ñ–ª–∞ (–Ü–ú–¢): ${isFinite(imt_value)?imt_value:'‚Äî'}\n`;
        output += `–Ü–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü—ñ—è –Ü–ú–¢: ${IMT_Interpretation(imt_value)}\n`;
      }catch(err){console.error(err);output='–°—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è—Ö.'}

      document.getElementById('result').innerText = output;
    }

    // –ó–∞–ø—É—Å–∫ –∑ –¥–µ—Ñ–æ–ª—Ç–Ω–∏–º–∏ –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
    window.addEventListener('load', ()=>{showData()});
    </script>
</body>
</html>